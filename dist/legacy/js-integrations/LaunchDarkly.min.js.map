{"version":3,"file":"LaunchDarkly.min.js","sources":["../../../node_modules/isobject/index.js","../../../node_modules/get-value/index.js","../../../src/utils/logUtil.js","../../../src/utils/errorHandler.js","../../../src/utils/constants.js","../../../src/utils/ScriptLoader.js","../../../src/integrations/LaunchDarkly/constants.js","../../../src/integrations/LaunchDarkly/browser.js","../../../src/integrations/LaunchDarkly/utils.js"],"sourcesContent":["/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n};\n","/*!\n * get-value <https://github.com/jonschlinkert/get-value>\n *\n * Copyright (c) 2014-2018, Jon Schlinkert.\n * Released under the MIT License.\n */\n\nconst isObject = require('isobject');\n\nmodule.exports = function(target, path, options) {\n  if (!isObject(options)) {\n    options = { default: options };\n  }\n\n  if (!isValidObject(target)) {\n    return typeof options.default !== 'undefined' ? options.default : target;\n  }\n\n  if (typeof path === 'number') {\n    path = String(path);\n  }\n\n  const isArray = Array.isArray(path);\n  const isString = typeof path === 'string';\n  const splitChar = options.separator || '.';\n  const joinChar = options.joinChar || (typeof splitChar === 'string' ? splitChar : '.');\n\n  if (!isString && !isArray) {\n    return target;\n  }\n\n  if (isString && path in target) {\n    return isValid(path, target, options) ? target[path] : options.default;\n  }\n\n  let segs = isArray ? path : split(path, splitChar, options);\n  let len = segs.length;\n  let idx = 0;\n\n  do {\n    let prop = segs[idx];\n    if (typeof prop === 'number') {\n      prop = String(prop);\n    }\n\n    while (prop && prop.slice(-1) === '\\\\') {\n      prop = join([prop.slice(0, -1), segs[++idx] || ''], joinChar, options);\n    }\n\n    if (prop in target) {\n      if (!isValid(prop, target, options)) {\n        return options.default;\n      }\n\n      target = target[prop];\n    } else {\n      let hasProp = false;\n      let n = idx + 1;\n\n      while (n < len) {\n        prop = join([prop, segs[n++]], joinChar, options);\n\n        if ((hasProp = prop in target)) {\n          if (!isValid(prop, target, options)) {\n            return options.default;\n          }\n\n          target = target[prop];\n          idx = n - 1;\n          break;\n        }\n      }\n\n      if (!hasProp) {\n        return options.default;\n      }\n    }\n  } while (++idx < len && isValidObject(target));\n\n  if (idx === len) {\n    return target;\n  }\n\n  return options.default;\n};\n\nfunction join(segs, joinChar, options) {\n  if (typeof options.join === 'function') {\n    return options.join(segs);\n  }\n  return segs[0] + joinChar + segs[1];\n}\n\nfunction split(path, splitChar, options) {\n  if (typeof options.split === 'function') {\n    return options.split(path);\n  }\n  return path.split(splitChar);\n}\n\nfunction isValid(key, target, options) {\n  if (typeof options.isValid === 'function') {\n    return options.isValid(key, target);\n  }\n  return true;\n}\n\nfunction isValidObject(val) {\n  return isObject(val) || Array.isArray(val) || typeof val === 'function';\n}\n","const LOG_LEVEL_INFO = 1;\nconst LOG_LEVEL_DEBUG = 2;\nconst LOG_LEVEL_WARN = 3;\nconst LOG_LEVEL_ERROR = 4;\nconst DEF_LOG_LEVEL = LOG_LEVEL_ERROR;\nlet LOG_LEVEL = DEF_LOG_LEVEL;\n\nconst logger = {\n  setLogLevel(logLevel) {\n    switch (logLevel.toUpperCase()) {\n      case 'INFO':\n        LOG_LEVEL = LOG_LEVEL_INFO;\n        break;\n      case 'DEBUG':\n        LOG_LEVEL = LOG_LEVEL_DEBUG;\n        break;\n      case 'WARN':\n        LOG_LEVEL = LOG_LEVEL_WARN;\n        break;\n      default:\n        LOG_LEVEL = DEF_LOG_LEVEL;\n        break;\n    }\n  },\n\n  info(...args) {\n    if (LOG_LEVEL <= LOG_LEVEL_INFO) {\n      console.info(...args);\n    }\n  },\n\n  debug(...args) {\n    if (LOG_LEVEL <= LOG_LEVEL_DEBUG) {\n      console.log(...args);\n    }\n  },\n\n  warn(...args) {\n    if (LOG_LEVEL <= LOG_LEVEL_WARN) {\n      console.warn(...args);\n    }\n  },\n\n  error(...args) {\n    if (LOG_LEVEL <= LOG_LEVEL_ERROR) {\n      console.error(...args);\n    }\n  },\n};\n\nexport default logger;\n","import logger from './logUtil';\nimport { LOAD_ORIGIN, ERROR_REPORTING_SERVICE_GLOBAL_KEY_NAME } from './constants';\n\n/**\n * This function is to send handled errors to available error reporting client\n *\n * @param {Error} error Error instance from handled error\n */\nfunction notifyError(error) {\n  const errorReportingClient =\n    window.rudderanalytics && window.rudderanalytics[ERROR_REPORTING_SERVICE_GLOBAL_KEY_NAME];\n\n  if (errorReportingClient && error instanceof Error) {\n    errorReportingClient.notify(error);\n  }\n}\n\nfunction normalizeError(error, customMessage, analyticsInstance) {\n  let errorMessage;\n  try {\n    if (typeof error === 'string') {\n      errorMessage = error;\n    } else if (error instanceof Error) {\n      errorMessage = error.message;\n    } else {\n      errorMessage = error.message ? error.message : JSON.stringify(error);\n    }\n  } catch (e) {\n    errorMessage = '';\n  }\n\n  if (error instanceof Event) {\n    // Discard all the non-script loading errors\n    if (error.target && error.target.localName !== 'script') {\n      return '';\n    }\n\n    // Discard script errors that are not originated at SDK or from native SDKs\n    if (\n      error.target.dataset &&\n      (error.target.dataset.loader !== LOAD_ORIGIN ||\n        error.target.dataset.isNonNativeSDK !== 'true')\n    )\n      return '';\n\n    errorMessage = `error in script loading:: src::  ${error.target.src} id:: ${error.target.id}`;\n\n    // SDK triggered ad-blocker script\n    if (error.target.id === 'ad-block') {\n      analyticsInstance.page(\n        'RudderJS-Initiated',\n        'ad-block page request',\n        { path: '/ad-blocked', title: errorMessage },\n        analyticsInstance.sendAdblockPageOptions,\n      );\n      // No need to proceed further for Ad-block errors\n      return '';\n    }\n  }\n\n  const customErrMessagePrefix = customMessage || '';\n  return `[handleError]::${customErrMessagePrefix} \"${errorMessage}\"`;\n}\n\nfunction handleError(error, customMessage, analyticsInstance) {\n  let errorMessage;\n\n  try {\n    errorMessage = normalizeError(error, customMessage, analyticsInstance);\n  } catch (err) {\n    logger.error('[handleError] Exception:: ', err);\n    logger.error('[handleError] Original error:: ', JSON.stringify(error));\n    notifyError(err);\n  }\n\n  if (!errorMessage) {\n    return;\n  }\n\n  logger.error(errorMessage);\n  notifyError(error);\n}\n\nexport { notifyError, handleError, normalizeError };\n","// Reserved Keywords for properties/traits\nconst RESERVED_KEYS = [\n  'anonymous_id',\n  'id',\n  'sent_at',\n  'received_at',\n  'timestamp',\n  'original_timestamp',\n  'event_text',\n  'event',\n];\n\nconst CONFIG_URL =\n  'https://api.rudderlabs.com/sourceConfig/?p=__MODULE_TYPE__&v=__PACKAGE_VERSION__';\nconst SDK_CDN_BASE_URL = 'https://cdn.rudderlabs.com';\nconst CDN_ARCH_VERSION_DIR = 'v1.1';\nconst CDN_INT_DIR = 'js-integrations';\nconst DEST_SDK_BASE_URL = `${SDK_CDN_BASE_URL}/${CDN_ARCH_VERSION_DIR}/${CDN_INT_DIR}`;\n\nconst MAX_WAIT_FOR_INTEGRATION_LOAD = 10000;\nconst INTEGRATION_LOAD_CHECK_INTERVAL = 1000;\nconst MAX_TIME_TO_BUFFER_CLOUD_MODE_EVENTS = 10000;\nconst INTG_SUFFIX = '_RS';\nconst POLYFILL_URL =\n  'https://polyfill.io/v3/polyfill.min.js?features=Array.prototype.find%2CArray.prototype.includes%2CPromise%2CString.prototype.endsWith%2CString.prototype.includes%2CString.prototype.startsWith%2CObject.entries%2CObject.values%2CElement.prototype.dataset%2CString.prototype.replaceAll';\n\nconst GENERIC_TRUE_VALUES = ['true', 'True', 'TRUE', 't', 'T', '1'];\nconst GENERIC_FALSE_VALUES = ['false', 'False', 'FALSE', 'f', 'F', '0'];\n\nconst SAMESITE_COOKIE_OPTS = ['Lax', 'None', 'Strict'];\n\nconst DEFAULT_SESSION_TIMEOUT = 30 * 60 * 1000; // 30 min in milliseconds\nconst MIN_SESSION_TIMEOUT = 10 * 1000; // 10 sec in milliseconds\nconst MIN_SESSION_ID_LENGTH = 10;\n\nconst ERROR_REPORTING_SERVICE_GLOBAL_KEY_NAME = 'errorReporting';\nconst LOAD_ORIGIN = 'RS_JS_SDK';\n\nconst DEFAULT_REGION = 'US';\nconst DEFAULT_DATAPLANE_URL = 'https://hosted.rudderlabs.com';\n\nconst RESIDENCY_SERVERS = [DEFAULT_REGION, 'EU'];\n\nconst SUPPORTED_CONSENT_MANAGERS = ['oneTrust'];\n\nconst SYSTEM_KEYWORDS = ['library', 'consentManagement'];\nconst UA_CH_LEVELS = ['none', 'default', 'full'];\n\nconst DEFAULT_INTEGRATIONS_CONFIG = { All: true };\n\nexport {\n  RESERVED_KEYS,\n  CONFIG_URL,\n  SDK_CDN_BASE_URL,\n  CDN_ARCH_VERSION_DIR,\n  CDN_INT_DIR,\n  DEST_SDK_BASE_URL,\n  MAX_WAIT_FOR_INTEGRATION_LOAD,\n  INTEGRATION_LOAD_CHECK_INTERVAL,\n  INTG_SUFFIX,\n  POLYFILL_URL,\n  GENERIC_TRUE_VALUES,\n  GENERIC_FALSE_VALUES,\n  SAMESITE_COOKIE_OPTS,\n  DEFAULT_SESSION_TIMEOUT,\n  MIN_SESSION_TIMEOUT,\n  MIN_SESSION_ID_LENGTH,\n  ERROR_REPORTING_SERVICE_GLOBAL_KEY_NAME,\n  LOAD_ORIGIN,\n  DEFAULT_REGION,\n  DEFAULT_DATAPLANE_URL,\n  RESIDENCY_SERVERS,\n  SUPPORTED_CONSENT_MANAGERS,\n  SYSTEM_KEYWORDS,\n  UA_CH_LEVELS,\n  DEFAULT_INTEGRATIONS_CONFIG,\n  MAX_TIME_TO_BUFFER_CLOUD_MODE_EVENTS,\n};\n","/* eslint-disable no-use-before-define */\n// import logger from \"../utils/logUtil\";\n\nimport { handleError } from \"./errorHandler\";\n\nconst defaultAsyncState = true;\n\nexport const LOAD_ORIGIN = 'RS_JS_SDK';\n/**\n * Script loader\n * @param {String} id                               Id of the script\n * @param {String} src                              URL of the script\n * @param {Object} options                          Object containing different configuration\n * @param {Boolean} options.async                   Determines script will be loaded asynchronously or not\n * @param {Boolean} options.isNonNativeSDK          Determines whether the script that will be loaded is one of RS's own\n * @param {Boolean} options.skipDatasetAttributes   Determines whether to add or skip dataset attribute\n */\nconst ScriptLoader = (id, src, options = {}) => {\n  try {\n    const exists = document.getElementById(id);\n    if (exists) {\n      // logger.debug(\"script already loaded\");\n      return;\n    }\n\n    const js = document.createElement('script');\n    js.src = src;\n    js.async = options.async === undefined ? defaultAsyncState : options.async;\n    js.type = 'text/javascript';\n    js.id = id;\n    // This checking is in place to skip the dataset attribute for some cases(while loading polyfill)\n    if (options.skipDatasetAttributes !== true) {\n      js.setAttribute('data-loader', LOAD_ORIGIN);\n      if (options.isNonNativeSDK !== undefined) {\n        js.setAttribute('data-isNonNativeSDK', options.isNonNativeSDK);\n      }\n    }\n    const headElmColl = document.getElementsByTagName('head');\n    if (headElmColl.length > 0) {\n      // logger.debug(\"==adding script==\", js);\n      headElmColl[0].insertBefore(js, headElmColl[0].firstChild);\n    } else {\n      const e = document.getElementsByTagName('script')[0];\n      // logger.debug(\"==parent script==\", e);\n      // logger.debug(\"==adding script==\", js);\n      e.parentNode.insertBefore(js, e);\n    }\n  } catch (e) {\n    handleError(e);\n  }\n};\n\nexport default ScriptLoader;\n","const NAME = 'LAUNCHDARKLY';\nconst CNameMapping = {\n  [NAME]: NAME,\n  LaunchDarkly: NAME,\n  Launch_Darkly: NAME,\n  'Launch Darkly': NAME,\n  launchDarkly: NAME,\n  'launch darkly': NAME,\n};\n\nexport { NAME, CNameMapping };\n","/* eslint-disable class-methods-use-this */\nimport get from 'get-value';\nimport logger from '../../utils/logUtil';\nimport ScriptLoader from '../../utils/ScriptLoader';\nimport createUser from './utils';\nimport { NAME } from './constants';\n\nclass LaunchDarkly {\n  constructor(config, analytics, destinationInfo) {\n    if (analytics.logLevel) {\n      logger.setLogLevel(analytics.logLevel);\n    }\n    this.name = NAME;\n    this.clientSideId = config.clientSideId;\n    this.anonymousUsersSharedKey = config.anonymousUsersSharedKey;\n    this.areTransformationsConnected = destinationInfo && destinationInfo.areTransformationsConnected;\n    this.destinationId = destinationInfo && destinationInfo.destinationId;\n  }\n\n  init() {\n    logger.debug('===in init LaunchDarkly===');\n    if (!this.clientSideId) {\n      logger.error(\n        `${this.name} :: Unable to initialize destination - clientSideId is missing in config`,\n      );\n      return;\n    }\n    ScriptLoader(null, 'https://unpkg.com/launchdarkly-js-client-sdk@2');\n  }\n\n  isLoaded() {\n    logger.debug('===In isLoaded LaunchDarkly===');\n    return !!window.LDClient;\n  }\n\n  isReady() {\n    logger.debug('===In isReady LaunchDarkly===');\n    return this.isLoaded();\n  }\n\n  identify(rudderElement) {\n    const { message } = rudderElement;\n    const anonymousUsersSharedKey =\n      get(message, `integrations.${NAME}.key`) || this.anonymousUsersSharedKey;\n    this.launchDarklyUser = createUser(message, anonymousUsersSharedKey);\n\n    if (window.ldclient) {\n      window.ldclient.identify(this.launchDarklyUser);\n    } else {\n      window.ldclient = window.LDClient.initialize(this.clientSideId, this.launchDarklyUser);\n    }\n  }\n\n  track(rudderElement) {\n    const { event, properties } = rudderElement.message;\n    if (window.ldclient) {\n      window.ldclient.track(event, properties);\n    } else logger.error('=== In LaunchDarkly, track is not supported before identify ===');\n  }\n\n  alias(rudderElement) {\n    const { message } = rudderElement;\n    const newUser = { key: message.userId };\n\n    if (window.ldclient) {\n      window.ldclient.alias(newUser, this.launchDarklyUser);\n    } else logger.error('=== In LaunchDarkly, alias is not supported before identify ===');\n  }\n}\nexport default LaunchDarkly;\n","const createUser = (message, anonymousUsersSharedKey = undefined) => {\n  const user = {};\n  user.key = message.userId || message.anonymousId;\n  const { traits } = message.context;\n  if (traits.anonymous !== undefined) {\n    user.anonymous = traits.anonymous;\n    if (anonymousUsersSharedKey) user.key = anonymousUsersSharedKey;\n  }\n  if (traits.avatar !== undefined) user.avatar = traits.avatar;\n  if (traits.country !== undefined) user.country = traits.country;\n  if (traits.custom !== undefined) user.custom = traits.custom;\n  if (traits.email !== undefined) user.email = traits.email;\n  if (traits.firstName !== undefined) user.firstName = traits.firstName;\n  if (traits.ip !== undefined) user.ip = traits.ip;\n  if (traits.lastName !== undefined) user.lastName = traits.lastName;\n  if (traits.name !== undefined) user.name = traits.name;\n  if (traits.privateAttributeNames !== undefined)\n    user.privateAttributeNames = traits.privateAttributeNames;\n  if (traits.secondary !== undefined) user.secondary = traits.secondary;\n  return user;\n};\n\nexport default createUser;\n"],"names":["isObject","val","_typeof","Array","isArray","join","segs","joinChar","options","isValid","key","target","isValidObject","LOG_LEVEL","logger","logLevel","toUpperCase","_console2","console","log","apply","arguments","_console4","error","notifyError","errorReportingClient","window","rudderanalytics","Error","notify","handleError","customMessage","analyticsInstance","errorMessage","message","JSON","stringify","e","Event","localName","dataset","loader","isNonNativeSDK","concat","src","id","page","path","title","sendAdblockPageOptions","normalizeError","err","LOAD_ORIGIN","NAME","_defineProperty","_CNameMapping","LaunchDarkly","config","analytics","destinationInfo","_classCallCheck","this","name","clientSideId","anonymousUsersSharedKey","areTransformationsConnected","destinationId","value","length","undefined","document","getElementById","js","createElement","async","type","skipDatasetAttributes","setAttribute","headElmColl","getElementsByTagName","insertBefore","firstChild","parentNode","ScriptLoader","LDClient","isLoaded","rudderElement","default","String","isString","splitChar","separator","split","len","idx","prop","slice","hasProp","n","get","launchDarklyUser","user","userId","anonymousId","traits","context","anonymous","avatar","country","custom","email","firstName","ip","lastName","privateAttributeNames","secondary","createUser","ldclient","identify","initialize","_rudderElement$messag","event","properties","track","newUser","alias"],"mappings":"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"}