var SnapPixel_RS=function(e){"use strict";function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?t(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,r){return(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},p=function(e){return null!=e&&"object"===n(e)&&!1===Array.isArray(e)},h=function(e,t,r){if(p(r)||(r={default:r}),!y(e))return void 0!==r.default?r.default:e;"number"==typeof t&&(t=String(t));var n=Array.isArray(t),i="string"==typeof t,o=r.separator||".",a=r.joinChar||("string"==typeof o?o:".");if(!i&&!n)return e;if(i&&t in e)return v(t,e,r)?e[t]:r.default;var s=n?t:function(e,t,r){if("function"==typeof r.split)return r.split(e);return e.split(t)}(t,o,r),c=s.length,u=0;do{var f=s[u];for("number"==typeof f&&(f=String(f));f&&"\\"===f.slice(-1);)f=d([f.slice(0,-1),s[++u]||""],a,r);if(f in e){if(!v(f,e,r))return r.default;e=e[f]}else{for(var l=!1,h=u+1;h<c;)if(l=(f=d([f,s[h++]],a,r))in e){if(!v(f,e,r))return r.default;e=e[f],u=h-1;break}if(!l)return r.default}}while(++u<c&&y(e));return u===c?e:r.default};function d(e,t,r){return"function"==typeof r.join?r.join(e):e[0]+t+e[1]}function v(e,t,r){return"function"!=typeof r.isValid||r.isValid(e,t)}function y(e){return p(e)||Array.isArray(e)||"function"==typeof e}var g,m={},_={},b={get exports(){return _},set exports(e){_=e}};function w(){return g||(g=1,b.exports=(e=e||function(e,t){var r=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),n={},i=n.lib={},o=i.Base={extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=i.WordArray=o.extend({init:function(e,r){e=this.words=e||[],this.sigBytes=r!=t?r:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(var o=0;o<i;o++){var a=r[o>>>2]>>>24-o%4*8&255;t[n+o>>>2]|=a<<24-(n+o)%4*8}else for(o=0;o<i;o+=4)t[n+o>>>2]=r[o>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var r,n=[],i=function(t){var r=987654321,n=4294967295;return function(){var i=((r=36969*(65535&r)+(r>>16)&n)<<16)+(t=18e3*(65535&t)+(t>>16)&n)&n;return i/=4294967296,(i+=.5)*(e.random()>.5?1:-1)}},o=0;o<t;o+=4){var s=i(4294967296*(r||e.random()));r=987654071*s(),n.push(4294967296*s()|0)}return new a.init(n,t)}}),s=n.enc={},c=s.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new a.init(r,t/2)}},u=s.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new a.init(r,t)}},f=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},l=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,n=r.words,i=r.sigBytes,o=this.blockSize,s=i/(4*o),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*o,u=e.min(4*c,i);if(c){for(var f=0;f<c;f+=o)this._doProcessBlock(n,f);var l=n.splice(0,c);r.sigBytes-=u}return new a.init(l,u)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=l.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new p.HMAC.init(e,r).finalize(t)}}});var p=n.algo={};return n}(Math),e)),_;var e}var C,k={},S={get exports(){return k},set exports(e){k=e}};function x(){return C||(C=1,S.exports=(e=w(),function(){var t=e,r=t.lib.WordArray;function n(e,t,n){for(var i=[],o=0,a=0;a<t;a++)if(a%4){var s=n[e.charCodeAt(a-1)]<<a%4*2,c=n[e.charCodeAt(a)]>>>6-a%4*2;i[o>>>2]|=(s|c)<<24-o%4*8,o++}return r.create(i,o)}t.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp();for(var i=[],o=0;o<r;o+=3)for(var a=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<r;s++)i.push(n.charAt(a>>>6*(3-s)&63));var c=n.charAt(64);if(c)for(;i.length%4;)i.push(c);return i.join("")},parse:function(e){var t=e.length,r=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<r.length;o++)i[r.charCodeAt(o)]=o}var a=r.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(t=s)}return n(e,t,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64)),k;var e}var A,j={},O={get exports(){return j},set exports(e){j=e}};function I(){return A||(A=1,O.exports=(e=w(),function(t){var r=e,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,s=[];!function(){for(var e=0;e<64;e++)s[e]=4294967296*t.abs(t.sin(e+1))|0}();var c=a.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var n=t+r,i=e[n];e[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,a=e[t+0],c=e[t+1],h=e[t+2],d=e[t+3],v=e[t+4],y=e[t+5],g=e[t+6],m=e[t+7],_=e[t+8],b=e[t+9],w=e[t+10],C=e[t+11],k=e[t+12],S=e[t+13],x=e[t+14],A=e[t+15],j=o[0],O=o[1],I=o[2],E=o[3];j=u(j,O,I,E,a,7,s[0]),E=u(E,j,O,I,c,12,s[1]),I=u(I,E,j,O,h,17,s[2]),O=u(O,I,E,j,d,22,s[3]),j=u(j,O,I,E,v,7,s[4]),E=u(E,j,O,I,y,12,s[5]),I=u(I,E,j,O,g,17,s[6]),O=u(O,I,E,j,m,22,s[7]),j=u(j,O,I,E,_,7,s[8]),E=u(E,j,O,I,b,12,s[9]),I=u(I,E,j,O,w,17,s[10]),O=u(O,I,E,j,C,22,s[11]),j=u(j,O,I,E,k,7,s[12]),E=u(E,j,O,I,S,12,s[13]),I=u(I,E,j,O,x,17,s[14]),j=f(j,O=u(O,I,E,j,A,22,s[15]),I,E,c,5,s[16]),E=f(E,j,O,I,g,9,s[17]),I=f(I,E,j,O,C,14,s[18]),O=f(O,I,E,j,a,20,s[19]),j=f(j,O,I,E,y,5,s[20]),E=f(E,j,O,I,w,9,s[21]),I=f(I,E,j,O,A,14,s[22]),O=f(O,I,E,j,v,20,s[23]),j=f(j,O,I,E,b,5,s[24]),E=f(E,j,O,I,x,9,s[25]),I=f(I,E,j,O,d,14,s[26]),O=f(O,I,E,j,_,20,s[27]),j=f(j,O,I,E,S,5,s[28]),E=f(E,j,O,I,h,9,s[29]),I=f(I,E,j,O,m,14,s[30]),j=l(j,O=f(O,I,E,j,k,20,s[31]),I,E,y,4,s[32]),E=l(E,j,O,I,_,11,s[33]),I=l(I,E,j,O,C,16,s[34]),O=l(O,I,E,j,x,23,s[35]),j=l(j,O,I,E,c,4,s[36]),E=l(E,j,O,I,v,11,s[37]),I=l(I,E,j,O,m,16,s[38]),O=l(O,I,E,j,w,23,s[39]),j=l(j,O,I,E,S,4,s[40]),E=l(E,j,O,I,a,11,s[41]),I=l(I,E,j,O,d,16,s[42]),O=l(O,I,E,j,g,23,s[43]),j=l(j,O,I,E,b,4,s[44]),E=l(E,j,O,I,k,11,s[45]),I=l(I,E,j,O,A,16,s[46]),j=p(j,O=l(O,I,E,j,h,23,s[47]),I,E,a,6,s[48]),E=p(E,j,O,I,m,10,s[49]),I=p(I,E,j,O,x,15,s[50]),O=p(O,I,E,j,y,21,s[51]),j=p(j,O,I,E,k,6,s[52]),E=p(E,j,O,I,d,10,s[53]),I=p(I,E,j,O,w,15,s[54]),O=p(O,I,E,j,c,21,s[55]),j=p(j,O,I,E,_,6,s[56]),E=p(E,j,O,I,A,10,s[57]),I=p(I,E,j,O,g,15,s[58]),O=p(O,I,E,j,S,21,s[59]),j=p(j,O,I,E,v,6,s[60]),E=p(E,j,O,I,C,10,s[61]),I=p(I,E,j,O,h,15,s[62]),O=p(O,I,E,j,b,21,s[63]),o[0]=o[0]+j|0,o[1]=o[1]+O|0,o[2]=o[2]+I|0,o[3]=o[3]+E|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;r[i>>>5]|=128<<24-i%32;var o=t.floor(n/4294967296),a=n;r[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),r[14+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(r.length+1),this._process();for(var s=this._hash,c=s.words,u=0;u<4;u++){var f=c[u];c[u]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8)}return s},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t,r,n,i,o,a){var s=e+(t&r|~t&n)+i+a;return(s<<o|s>>>32-o)+t}function f(e,t,r,n,i,o,a){var s=e+(t&n|r&~n)+i+a;return(s<<o|s>>>32-o)+t}function l(e,t,r,n,i,o,a){var s=e+(t^r^n)+i+a;return(s<<o|s>>>32-o)+t}function p(e,t,r,n,i,o,a){var s=e+(r^(t|~n))+i+a;return(s<<o|s>>>32-o)+t}r.MD5=o._createHelper(c),r.HmacMD5=o._createHmacHelper(c)}(Math),e.MD5)),j;var e}var E,F={},D={get exports(){return F},set exports(e){F=e}},B={},T={get exports(){return B},set exports(e){B=e}};function P(){return E||(E=1,T.exports=(s=w(),t=(e=s).lib,r=t.WordArray,n=t.Hasher,i=e.algo,o=[],a=i.SHA1=n.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],a=r[2],s=r[3],c=r[4],u=0;u<80;u++){if(u<16)o[u]=0|e[t+u];else{var f=o[u-3]^o[u-8]^o[u-14]^o[u-16];o[u]=f<<1|f>>>31}var l=(n<<5|n>>>27)+c+o[u];l+=u<20?1518500249+(i&a|~i&s):u<40?1859775393+(i^a^s):u<60?(i&a|i&s|a&s)-1894007588:(i^a^s)-899497514,c=s,s=a,a=i<<30|i>>>2,i=n,n=l}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+a|0,r[3]=r[3]+s|0,r[4]=r[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(n+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}}),e.SHA1=n._createHelper(a),e.HmacSHA1=n._createHmacHelper(a),s.SHA1)),B;var e,t,r,n,i,o,a,s}var R,M,z={},H={get exports(){return z},set exports(e){z=e}};function U(){return M||(M=1,D.exports=function(e){return r=(t=e).lib,n=r.Base,i=r.WordArray,o=t.algo,a=o.MD5,s=o.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,n=r.hasher.create(),o=i.create(),a=o.words,s=r.keySize,c=r.iterations;a.length<s;){u&&n.update(u);var u=n.update(e).finalize(t);n.reset();for(var f=1;f<c;f++)u=n.finalize(u),n.reset();o.concat(u)}return o.sigBytes=4*s,o}}),t.EvpKDF=function(e,t,r){return s.create(r).compute(e,t)},e.EvpKDF;var t,r,n,i,o,a,s}(w(),P(),R||(R=1,H.exports=(e=w(),void function(){var t=e,r=t.lib.Base,n=t.enc.Utf8;t.algo.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var r=e.blockSize,i=4*r;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),a=this._iKey=t.clone(),s=o.words,c=a.words,u=0;u<r;u++)s[u]^=1549556828,c[u]^=909522486;o.sigBytes=a.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,r=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(r))}})}())))),F;var e}var L,N,K={},$={get exports(){return K},set exports(e){K=e}};({get exports(){return m},set exports(e){m=e}}).exports=function(e){return function(){var t=e,r=t.lib.BlockCipher,n=t.algo,i=[],o=[],a=[],s=[],c=[],u=[],f=[],l=[],p=[],h=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var r=0,n=0;for(t=0;t<256;t++){var d=n^n<<1^n<<2^n<<3^n<<4;d=d>>>8^255&d^99,i[r]=d,o[d]=r;var v=e[r],y=e[v],g=e[y],m=257*e[d]^16843008*d;a[r]=m<<24|m>>>8,s[r]=m<<16|m>>>16,c[r]=m<<8|m>>>24,u[r]=m,m=16843009*g^65537*y^257*v^16843008*r,f[d]=m<<24|m>>>8,l[d]=m<<16|m>>>16,p[d]=m<<8|m>>>24,h[d]=m,r?(r=v^e[e[e[g^v]]],n^=e[e[n]]):r=n=1}}();var d=[0,1,2,4,8,16,32,64,128,27,54],v=n.AES=r.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4,n=4*((this._nRounds=r+6)+1),o=this._keySchedule=[],a=0;a<n;a++)if(a<r)o[a]=t[a];else{var s=o[a-1];a%r?r>6&&a%r==4&&(s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s]):(s=i[(s=s<<8|s>>>24)>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s],s^=d[a/r|0]<<24),o[a]=o[a-r]^s}for(var c=this._invKeySchedule=[],u=0;u<n;u++)a=n-u,s=u%4?o[a]:o[a-4],c[u]=u<4||a<=4?s:f[i[s>>>24]]^l[i[s>>>16&255]]^p[i[s>>>8&255]]^h[i[255&s]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,s,c,u,i)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,f,l,p,h,o),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,n,i,o,a,s){for(var c=this._nRounds,u=e[t]^r[0],f=e[t+1]^r[1],l=e[t+2]^r[2],p=e[t+3]^r[3],h=4,d=1;d<c;d++){var v=n[u>>>24]^i[f>>>16&255]^o[l>>>8&255]^a[255&p]^r[h++],y=n[f>>>24]^i[l>>>16&255]^o[p>>>8&255]^a[255&u]^r[h++],g=n[l>>>24]^i[p>>>16&255]^o[u>>>8&255]^a[255&f]^r[h++],m=n[p>>>24]^i[u>>>16&255]^o[f>>>8&255]^a[255&l]^r[h++];u=v,f=y,l=g,p=m}v=(s[u>>>24]<<24|s[f>>>16&255]<<16|s[l>>>8&255]<<8|s[255&p])^r[h++],y=(s[f>>>24]<<24|s[l>>>16&255]<<16|s[p>>>8&255]<<8|s[255&u])^r[h++],g=(s[l>>>24]<<24|s[p>>>16&255]<<16|s[u>>>8&255]<<8|s[255&f])^r[h++],m=(s[p>>>24]<<24|s[u>>>16&255]<<16|s[f>>>8&255]<<8|s[255&l])^r[h++],e[t]=v,e[t+1]=y,e[t+2]=g,e[t+3]=m},keySize:8});t.AES=r._createHelper(v)}(),e.AES}(w(),x(),I(),U(),L||(L=1,$.exports=(N=w(),U(),void(N.lib.Cipher||function(e){var t=N,r=t.lib,n=r.Base,i=r.WordArray,o=r.BufferedBlockAlgorithm,a=t.enc;a.Utf8;var s=a.Base64,c=t.algo.EvpKDF,u=r.Cipher=o.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?m:y}return function(t){return{encrypt:function(r,n,i){return e(n).encrypt(t,r,n,i)},decrypt:function(r,n,i){return e(n).decrypt(t,r,n,i)}}}}()});r.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var f=t.mode={},l=r.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),p=f.CBC=function(){var t=l.extend();function r(t,r,n){var i=this._iv;if(i){var o=i;this._iv=e}else o=this._prevBlock;for(var a=0;a<n;a++)t[r+a]^=o[a]}return t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize;r.call(this,e,t,i),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+i)}}),t.Decryptor=t.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,o=e.slice(t,t+i);n.decryptBlock(e,t),r.call(this,e,t,i),this._prevBlock=o}}),t}(),h=(t.pad={}).Pkcs7={pad:function(e,t){for(var r=4*t,n=r-e.sigBytes%r,o=n<<24|n<<16|n<<8|n,a=[],s=0;s<n;s+=4)a.push(o);var c=i.create(a,n);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}};r.BlockCipher=u.extend({cfg:u.cfg.extend({mode:p,padding:h}),reset:function(){u.reset.call(this);var e=this.cfg,t=e.iv,r=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=r.createEncryptor;else n=r.createDecryptor,this._minBufferSize=1;this._mode&&this._mode.__creator==n?this._mode.init(this,t&&t.words):(this._mode=n.call(r,this,t&&t.words),this._mode.__creator=n)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var d=r.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),v=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,r=e.salt;if(r)var n=i.create([1398893684,1701076831]).concat(r).concat(t);else n=t;return n.toString(s)},parse:function(e){var t=s.parse(e),r=t.words;if(1398893684==r[0]&&1701076831==r[1]){var n=i.create(r.slice(2,4));r.splice(0,4),t.sigBytes-=16}return d.create({ciphertext:t,salt:n})}},y=r.SerializableCipher=n.extend({cfg:n.extend({format:v}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var i=e.createEncryptor(r,n),o=i.finalize(t),a=i.cfg;return d.create({ciphertext:o,key:r,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(r,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),g=(t.kdf={}).OpenSSL={execute:function(e,t,r,n){n||(n=i.random(8));var o=c.create({keySize:t+r}).compute(e,n),a=i.create(o.words.slice(t),4*r);return o.sigBytes=4*t,d.create({key:o,iv:a,salt:n})}},m=r.PasswordBasedCipher=y.extend({cfg:y.cfg.extend({kdf:g}),encrypt:function(e,t,r,n){var i=(n=this.cfg.extend(n)).kdf.execute(r,e.keySize,e.ivSize);n.iv=i.iv;var o=y.encrypt.call(this,e,t,i.key,n);return o.mixIn(i),o},decrypt:function(e,t,r,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var i=n.kdf.execute(r,e.keySize,e.ivSize,t.salt);return n.iv=i.iv,y.decrypt.call(this,e,t,i.key,n)}})}()))));var W=m,V={};!function(e,t){e.exports=function(e){return e.enc.Utf8}(w())}({get exports(){return V},set exports(e){V=e}});var G=V,q=4,J=function(e){switch(e.toUpperCase()){case"INFO":q=1;break;case"DEBUG":q=2;break;case"WARN":q=3;break;default:q=4}},X=function(){var e;q<=2&&(e=console).log.apply(e,arguments)},Z=function(){var e;q<=4&&(e=console).error.apply(e,arguments)},Q="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Y(){throw new Error("setTimeout has not been defined")}function ee(){throw new Error("clearTimeout has not been defined")}var te=Y,re=ee;function ne(e){if(te===setTimeout)return setTimeout(e,0);if((te===Y||!te)&&setTimeout)return te=setTimeout,setTimeout(e,0);try{return te(e,0)}catch(t){try{return te.call(null,e,0)}catch(t){return te.call(this,e,0)}}}"function"==typeof Q.setTimeout&&(te=setTimeout),"function"==typeof Q.clearTimeout&&(re=clearTimeout);var ie,oe=[],ae=!1,se=-1;function ce(){ae&&ie&&(ae=!1,ie.length?oe=ie.concat(oe):se=-1,oe.length&&ue())}function ue(){if(!ae){var e=ne(ce);ae=!0;for(var t=oe.length;t;){for(ie=oe,oe=[];++se<t;)ie&&ie[se].run();se=-1,t=oe.length}ie=null,ae=!1,function(e){if(re===clearTimeout)return clearTimeout(e);if((re===ee||!re)&&clearTimeout)return re=clearTimeout,clearTimeout(e);try{re(e)}catch(t){try{return re.call(null,e)}catch(t){return re.call(this,e)}}}(e)}}function fe(e,t){this.fun=e,this.array=t}fe.prototype.run=function(){this.fun.apply(null,this.array)};function le(){}var pe=le,he=le,de=le,ve=le,ye=le,ge=le,me=le;var _e=Q.performance||{},be=_e.now||_e.mozNow||_e.msNow||_e.oNow||_e.webkitNow||function(){return(new Date).getTime()};var we=new Date;var Ce,ke,Se={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];oe.push(new fe(e,t)),1!==oe.length||ae||ne(ue)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:pe,addListener:he,once:de,off:ve,removeListener:ye,removeAllListeners:ge,emit:me,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*be.call(_e),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-we)/1e3}},xe={};function Ae(){if(ke)return Ce;ke=1;var e=1e3,t=60*e,r=60*t,i=24*r,o=7*i,a=365.25*i;function s(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}return Ce=function(c,u){u=u||{};var f=n(c);if("string"===f&&c.length>0)return function(n){if((n=String(n)).length>100)return;var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(n);if(!s)return;var c=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*a;case"weeks":case"week":case"w":return c*o;case"days":case"day":case"d":return c*i;case"hours":case"hour":case"hrs":case"hr":case"h":return c*r;case"minutes":case"minute":case"mins":case"min":case"m":return c*t;case"seconds":case"second":case"secs":case"sec":case"s":return c*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(c);if("number"===f&&isFinite(c))return u.long?function(n){var o=Math.abs(n);if(o>=i)return s(n,o,i,"day");if(o>=r)return s(n,o,r,"hour");if(o>=t)return s(n,o,t,"minute");if(o>=e)return s(n,o,e,"second");return n+" ms"}(c):function(n){var o=Math.abs(n);if(o>=i)return Math.round(n/i)+"d";if(o>=r)return Math.round(n/r)+"h";if(o>=t)return Math.round(n/t)+"m";if(o>=e)return Math.round(n/e)+"s";return n+"ms"}(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))},Ce}var je=function(e){function t(e){var n,i,o,a=null;function s(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];if(s.enabled){var o=s,a=Number(new Date),c=a-(n||a);o.diff=c,o.prev=n,o.curr=a,n=a,r[0]=t.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var u=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,(function(e,n){if("%%"===e)return"%";u++;var i=t.formatters[n];if("function"==typeof i){var a=r[u];e=i.call(o,a),r.splice(u,1),u--}return e})),t.formatArgs.call(o,r);var f=o.log||t.log;f.apply(o,r)}}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=r,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==a?a:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o)},set:function(e){a=e}}),"function"==typeof t.init&&t.init(s),s}function r(e,r){var n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){var e=[].concat(c(t.names.map(n)),c(t.skips.map(n).map((function(e){return"-"+e})))).join(",");return t.enable(""),e},t.enable=function(e){var r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=Ae(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((function(r){t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){for(var r=0,n=0;n<e.length;n++)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t};!function(e,t){var r;t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(i=n))})),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==Se&&"env"in Se&&(e=Se.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(r=!1,function(){r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||function(){},e.exports=je(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}({get exports(){return xe},set exports(e){xe=e}},xe);var Oe=xe("cookie"),Ie=function(e,t,r){switch(arguments.length){case 3:case 2:return Ee(e,t,r);case 1:return De(e);default:return Fe()}};function Ee(e,t,r){r=r||{};var n=Be(e)+"="+Be(t);null==t&&(r.maxage=-1),r.maxage&&(r.expires=new Date(+new Date+r.maxage)),r.path&&(n+="; path="+r.path),r.domain&&(n+="; domain="+r.domain),r.expires&&(n+="; expires="+r.expires.toUTCString()),r.samesite&&(n+="; samesite="+r.samesite),r.secure&&(n+="; secure"),document.cookie=n}function Fe(){var e;try{e=document.cookie}catch(e){return"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e.stack||e),{}}return function(e){var t,r={},n=e.split(/ *; */);if(""==n[0])return r;for(var i=0;i<n.length;++i)r[Te((t=n[i].split("="))[0])]=Te(t[1]);return r}(e)}function De(e){return Fe()[e]}function Be(e){try{return encodeURIComponent(e)}catch(t){Oe("error `encode(%o)` - %o",e,t)}}function Te(e){try{return decodeURIComponent(e)}catch(t){Oe("error `decode(%o)` - %o",e,t)}}var Pe={},Re={get exports(){return Pe},set exports(e){Pe=e}},Me=Math.max,ze=function(e,t){var r=t?t.length:0;if(!r)return[];for(var n=Me(Number(e)||0,0),i=Me(r-n,0),o=new Array(i),a=0;a<i;a+=1)o[a]=t[a+n];return o},He=Math.max,Ue=ze,Le=function(e){if(null==e||!e.length)return[];for(var t=new Array(He(e.length-2,0)),r=1;r<e.length;r+=1)t[r-1]=e[r];return t},Ne=Object.prototype.hasOwnProperty,Ke=Object.prototype.toString,$e=function(e){return Boolean(e)&&"object"===n(e)},We=function(e){return Boolean(e)&&"[object Object]"===Ke.call(e)},Ve=function(e,t,r,n){return Ne.call(t,n)&&void 0===e[n]&&(e[n]=r),t},Ge=function(e,t,r,n){return Ne.call(t,n)&&(We(e[n])&&We(r)?e[n]=Je(e[n],r):void 0===e[n]&&(e[n]=r)),t},qe=function(e,t){if(!$e(t))return t;e=e||Ve;for(var r=Ue(2,arguments),n=0;n<r.length;n+=1)for(var i in r[n])e(t,r[n],r[n][i],i);return t},Je=function(e){return qe.apply(null,[Ge,e].concat(Le(arguments)))};Re.exports=function(e){return qe.apply(null,[null,e].concat(Le(arguments)))},Pe.deep=Je;var Xe={},Ze={get exports(){return Xe},set exports(e){Xe=e}},Qe={};!function(e){function t(e){switch(e){case"http:":return 80;case"https:":return 443;default:return location.port}}e.parse=function(e){var r=document.createElement("a");return r.href=e,{href:r.href,host:r.host||location.host,port:"0"===r.port||""===r.port?t(r.protocol):r.port,hash:r.hash,hostname:r.hostname||location.hostname,pathname:"/"!=r.pathname.charAt(0)?"/"+r.pathname:r.pathname,protocol:r.protocol&&":"!=r.protocol?r.protocol:location.protocol,search:r.search,query:r.search.slice(1)}},e.isAbsolute=function(e){return 0==e.indexOf("//")||!!~e.indexOf("://")},e.isRelative=function(t){return!e.isAbsolute(t)},e.isCrossDomain=function(t){t=e.parse(t);var r=e.parse(window.location.href);return t.hostname!==r.hostname||t.port!==r.port||t.protocol!==r.protocol}}(Qe);var Ye=xe("cookie"),et=function(e,t,r){switch(arguments.length){case 3:case 2:return tt(e,t,r);case 1:return nt(e);default:return rt()}};function tt(e,t,r){r=r||{};var n=it(e)+"="+it(t);null==t&&(r.maxage=-1),r.maxage&&(r.expires=new Date(+new Date+r.maxage)),r.path&&(n+="; path="+r.path),r.domain&&(n+="; domain="+r.domain),r.expires&&(n+="; expires="+r.expires.toUTCString()),r.secure&&(n+="; secure"),document.cookie=n}function rt(){var e;try{e=document.cookie}catch(e){return"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e.stack||e),{}}return function(e){var t,r={},n=e.split(/ *; */);if(""==n[0])return r;for(var i=0;i<n.length;++i)r[ot((t=n[i].split("="))[0])]=ot(t[1]);return r}(e)}function nt(e){return rt()[e]}function it(e){try{return encodeURIComponent(e)}catch(t){Ye("error `encode(%o)` - %o",e,t)}}function ot(e){try{return decodeURIComponent(e)}catch(t){Ye("error `decode(%o)` - %o",e,t)}}!function(e,t){var r=Qe.parse,n=et;function i(e){for(var r=t.cookie,n=t.levels(e),i=0;i<n.length;++i){var o="__tld__",a=n[i],s={domain:"."+a};if(r(o,1,s),r(o))return r(o,null,s),a}return""}i.levels=function(e){var t=r(e).hostname.split("."),n=t[t.length-1],i=[];if(4===t.length&&n===parseInt(n,10))return i;if(t.length<=1)return i;for(var o=t.length-2;o>=0;--o)i.push(t.slice(o).join("."));return i},i.cookie=n,t=e.exports=i}(Ze,Xe);var at=Xe;function st(e){return null!=e&&"object"===n(e)&&!0===e["@@functional/placeholder"]}function ct(e){return function t(r){return 0===arguments.length||st(r)?t:e.apply(this,arguments)}}var ut=ct((function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}));function ft(e,t,r,n){var i,o=function(i){for(var o=t.length,a=0;a<o;){if(e===t[a])return r[a];a+=1}for(var s in t[a]=e,r[a]=i,e)e.hasOwnProperty(s)&&(i[s]=n?ft(e[s],t,r,!0):e[s]);return i};switch(ut(e)){case"Object":return o(Object.create(Object.getPrototypeOf(e)));case"Array":return o([]);case"Date":return new Date(e.valueOf());case"RegExp":return i=e,new RegExp(i.source,(i.global?"g":"")+(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.sticky?"y":"")+(i.unicode?"u":""));case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return e.slice();default:return e}}var lt=ct((function(e){return null!=e&&"function"==typeof e.clone?e.clone():ft(e,[],[],!0)})),pt=function(){function e(t){i(this,e),this.cOpts={},this.options(t),this.isSupportAvailable=this.checkSupportAvailability()}return a(e,[{key:"options",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(0===arguments.length)return this.cOpts;var t=".".concat(at(window.location.href));return"."===t&&(t=null),this.cOpts=Pe(e,{maxage:31536e6,path:"/",domain:t,samesite:"Lax"}),this.cOpts}},{key:"set",value:function(e,t){try{return Ie(e,t,lt(this.cOpts)),!0}catch(e){return Z(e),!1}}},{key:"get",value:function(e){return Ie(e)}},{key:"remove",value:function(e){try{return Ie(e,null,lt(this.cOpts)),!0}catch(e){return!1}}},{key:"checkSupportAvailability",value:function(){var e="test_rudder_cookie";return this.set(e,!0),!!this.get(e)&&(this.remove(e),!0)}}]),e}(),ht=new pt({}),dt={};!function(e,t){e.exports=function(){var e=window.localStorage;function t(e){return e=JSON.stringify(e),!!/^\{[\s\S]*\}$/.test(e)}function r(e){return void 0===e||"function"==typeof e?e+"":JSON.stringify(e)}function n(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}}function i(e){return"[object Function]"==={}.toString.call(e)}function o(e){return"[object Array]"===Object.prototype.toString.call(e)}function a(e){var t="_Is_Incognit",r="yes";try{e.setItem(t,r)}catch(t){if("QuotaExceededError"===t.name){var n=function(){};e.__proto__={setItem:n,getItem:n,removeItem:n,clear:n}}}finally{e.getItem(t)===r&&e.removeItem(t)}return e}function s(){if(!(this instanceof s))return new s}e=a(e),s.prototype={set:function(n,i){if(n&&!t(n))e.setItem(n,r(i));else if(t(n))for(var o in n)this.set(o,n[o]);return this},get:function(t){if(!t){var r={};return this.forEach((function(e,t){return r[e]=t})),r}if("?"===t.charAt(0))return this.has(t.substr(1));var i=arguments;if(i.length>1){for(var o={},a=0,s=i.length;a<s;a++){var c=n(e.getItem(i[a]));this.has(i[a])&&(o[i[a]]=c)}return o}return n(e.getItem(t))},clear:function(){return e.clear(),this},remove:function(t){var r=this.get(t);return e.removeItem(t),r},has:function(e){return{}.hasOwnProperty.call(this.get(),e)},keys:function(){var e=[];return this.forEach((function(t){e.push(t)})),e},forEach:function(t){for(var r=0,n=e.length;r<n;r++){var i=e.key(r);t(i,this.get(i))}return this},search:function(e){for(var t=this.keys(),r={},n=0,i=t.length;n<i;n++)t[n].indexOf(e)>-1&&(r[t[n]]=this.get(t[n]));return r}};var c=null;function u(e,r){var n=arguments,a=null;if(c||(c=s()),0===n.length)return c.get();if(1===n.length){if("string"==typeof e)return c.get(e);if(t(e))return c.set(e)}if(2===n.length&&"string"==typeof e){if(!r)return c.remove(e);if(r&&"string"==typeof r)return c.set(e,r);r&&i(r)&&(a=null,a=r(e,c.get(e)),u.set(e,a))}if(2===n.length&&o(e)&&i(r))for(var f=0,l=e.length;f<l;f++)a=r(e[f],c.get(e[f])),u.set(e[f],a);return u}for(var f in s.prototype)u[f]=s.prototype[f];return u}()}({get exports(){return dt},set exports(e){dt=e}});var vt=dt,yt=function(){function e(t){i(this,e),this.sOpts={},this.enabled=this.checkSupportAvailability(),this.options(t)}return a(e,[{key:"options",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 0===arguments.length||(Pe(e,{enabled:!0}),this.enabled=e.enabled&&this.enabled,this.sOpts=e),this.sOpts}},{key:"set",value:function(e,t){return vt.set(e,t)}},{key:"get",value:function(e){return vt.get(e)}},{key:"remove",value:function(e){return vt.remove(e)}},{key:"checkSupportAvailability",value:function(){var e="test_rudder_ls";return this.set(e,!0),!!this.get(e)&&(this.remove(e),!0)}}]),e}(),gt=new yt({}),mt="rl_user_id",_t="rl_trait",bt="rl_anonymous_id",wt="rl_group_id",Ct="rl_group_trait",kt="rl_page_init_referrer",St="rl_page_init_referring_domain",xt="rl_session",At="rl_auth_token",jt="RudderEncrypt:",Ot="Rudder",It={segment:"ajs_anonymous_id"};function Et(e){try{return e?JSON.parse(e):null}catch(t){return Z(t),e||null}}function Ft(e){return e.replace(/^\s+|\s+$/gm,"")}function Dt(e){return!e||"string"==typeof e&&""===Ft(e)?e:e.substring(0,jt.length)===jt?W.decrypt(e.substring(jt.length),Ot).toString(G):e}var Bt=function(){function e(){i(this,e),ht.isSupportAvailable?this.storage=ht:(gt.enabled&&(this.storage=gt),this.storage||Z("No storage is available :: initializing the SDK without storage"))}return a(e,[{key:"options",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.storage.options(e)}},{key:"setItem",value:function(e,t){this.storage.set(e,function(e){return""===Ft(e)?e:"".concat(jt).concat(W.encrypt(e,Ot).toString())}(function(e){return JSON.stringify(e)}(t)))}},{key:"setStringItem",value:function(e,t){"string"==typeof t?this.setItem(e,t):Z("[Storage] ".concat(e," should be string"))}},{key:"setUserId",value:function(e){this.setStringItem(mt,e)}},{key:"setUserTraits",value:function(e){this.setItem(_t,e)}},{key:"setGroupId",value:function(e){this.setStringItem(wt,e)}},{key:"setGroupTraits",value:function(e){this.setItem(Ct,e)}},{key:"setAnonymousId",value:function(e){this.setStringItem(bt,e)}},{key:"setInitialReferrer",value:function(e){this.setItem(kt,e)}},{key:"setInitialReferringDomain",value:function(e){this.setItem(St,e)}},{key:"setSessionInfo",value:function(e){this.setItem(xt,e)}},{key:"setAuthToken",value:function(e){this.setItem(At,e)}},{key:"getItem",value:function(e){return Et(Dt(this.storage.get(e)))}},{key:"getUserId",value:function(){return this.getItem(mt)}},{key:"getUserTraits",value:function(){return this.getItem(_t)}},{key:"getGroupId",value:function(){return this.getItem(wt)}},{key:"getGroupTraits",value:function(){return this.getItem(Ct)}},{key:"fetchExternalAnonymousId",value:function(e){var t,r=e.toLowerCase();return Object.keys(It).includes(r)&&"segment"===r?(gt.enabled&&(t=gt.get(It[r])),!t&&ht.isSupportAvailable&&(t=ht.get(It[r])),t):t}},{key:"getAnonymousId",value:function(e){var t=Et(Dt(this.storage.get(bt)));if(t)return t;var r=h(e,"autoCapture.source");if(!0===h(e,"autoCapture.enabled")&&"string"==typeof r){var n=this.fetchExternalAnonymousId(r);if(n)return n}return t}},{key:"getInitialReferrer",value:function(){return this.getItem(kt)}},{key:"getInitialReferringDomain",value:function(){return this.getItem(St)}},{key:"getSessionInfo",value:function(){return this.getItem(xt)}},{key:"getAuthToken",value:function(){return this.getItem(At)}},{key:"removeItem",value:function(e){return this.storage.remove(e)}},{key:"removeSessionInfo",value:function(){this.removeItem(xt)}},{key:"clear",value:function(e){this.storage.remove(mt),this.storage.remove(_t),this.storage.remove(wt),this.storage.remove(Ct),this.storage.remove(At),e&&this.storage.remove(bt)}}]),e}(),Tt=new Bt;var Pt=function(e){return void 0===e},Rt={};!function(e,t){var r=9007199254740991,i="[object Map]",o="[object Promise]",a="[object Set]",s="[object WeakMap]",c="[object DataView]",u=/^\[object .+?Constructor\]$/,f="object"==n(l)&&l&&l.Object===Object&&l,p="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,h=f||p||Function("return this")(),d=t&&!t.nodeType&&t,v=d&&e&&!e.nodeType&&e,y=v&&v.exports===d;var g,m,_,b=Function.prototype,w=Object.prototype,C=h["__core-js_shared__"],k=(g=/[^.]+$/.exec(C&&C.keys&&C.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"",S=b.toString,x=w.hasOwnProperty,A=w.toString,j=RegExp("^"+S.call(x).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),O=y?h.Buffer:void 0,I=w.propertyIsEnumerable,E=O?O.isBuffer:void 0,F=(m=Object.keys,_=Object,function(e){return m(_(e))}),D=$(h,"DataView"),B=$(h,"Map"),T=$(h,"Promise"),P=$(h,"Set"),R=$(h,"WeakMap"),M=!I.call({valueOf:1},"valueOf"),z=V(D),H=V(B),U=V(T),L=V(P),N=V(R);function K(e){if(!Q(e)||function(e){return!!k&&k in e}(e))return!1;var t=Z(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?j:u;return t.test(V(e))}function $(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return K(r)?r:void 0}var W=function(e){return A.call(e)};function V(e){if(null!=e){try{return S.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function G(e){return function(e){return function(e){return!!e&&"object"==n(e)}(e)&&J(e)}(e)&&x.call(e,"callee")&&(!I.call(e,"callee")||"[object Arguments]"==A.call(e))}(D&&W(new D(new ArrayBuffer(1)))!=c||B&&W(new B)!=i||T&&W(T.resolve())!=o||P&&W(new P)!=a||R&&W(new R)!=s)&&(W=function(e){var t=A.call(e),r="[object Object]"==t?e.constructor:void 0,n=r?V(r):void 0;if(n)switch(n){case z:return c;case H:return i;case U:return o;case L:return a;case N:return s}return t});var q=Array.isArray;function J(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}(e.length)&&!Z(e)}var X=E||function(){return!1};function Z(e){var t=Q(e)?A.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}function Q(e){var t=n(e);return!!e&&("object"==t||"function"==t)}e.exports=function(e){if(J(e)&&(q(e)||"string"==typeof e||"function"==typeof e.splice||X(e)||G(e)))return!e.length;var t=W(e);if(t==i||t==a)return!e.size;if(M||function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||w)}(e))return!F(e).length;for(var r in e)if(x.call(e,r))return!1;return!0}}({get exports(){return Rt},set exports(e){Rt=e}},Rt);var Mt=Rt,zt={};!function(e,t){var r="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",a="[object Array]",s="[object Boolean]",c="[object Date]",u="[object Error]",f="[object Function]",p="[object Map]",h="[object Number]",d="[object Object]",v="[object Promise]",y="[object RegExp]",g="[object Set]",m="[object String]",_="[object Symbol]",b="[object WeakMap]",w="[object ArrayBuffer]",C="[object DataView]",k=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,S=/^\w*$/,x=/^\./,A=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,j=/\\(\\)?/g,O=/^\[object .+?Constructor\]$/,I=/^(?:0|[1-9]\d*)$/,E={};E["[object Float32Array]"]=E["[object Float64Array]"]=E["[object Int8Array]"]=E["[object Int16Array]"]=E["[object Int32Array]"]=E["[object Uint8Array]"]=E["[object Uint8ClampedArray]"]=E["[object Uint16Array]"]=E["[object Uint32Array]"]=!0,E[o]=E[a]=E[w]=E[s]=E[C]=E[c]=E[u]=E[f]=E[p]=E[h]=E[d]=E[y]=E[g]=E[m]=E[b]=!1;var F="object"==n(l)&&l&&l.Object===Object&&l,D="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,B=F||D||Function("return this")(),T=t&&!t.nodeType&&t,P=T&&e&&!e.nodeType&&e,R=P&&P.exports===T&&F.process,M=function(){try{return R&&R.binding("util")}catch(e){}}(),z=M&&M.isTypedArray;function H(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function U(e,t){for(var r=-1,n=e?e.length:0;++r<n;)if(t(e[r],r,e))return!0;return!1}function L(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function N(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function K(e,t){return function(r){return e(t(r))}}function $(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var W,V=Array.prototype,G=Function.prototype,q=Object.prototype,J=B["__core-js_shared__"],X=(W=/[^.]+$/.exec(J&&J.keys&&J.keys.IE_PROTO||""))?"Symbol(src)_1."+W:"",Z=G.toString,Q=q.hasOwnProperty,Y=q.toString,ee=RegExp("^"+Z.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=B.Symbol,re=B.Uint8Array,ne=K(Object.getPrototypeOf,Object),ie=q.propertyIsEnumerable,oe=V.splice,ae=Object.getOwnPropertySymbols,se=K(Object.keys,Object),ce=He(B,"DataView"),ue=He(B,"Map"),fe=He(B,"Promise"),le=He(B,"Set"),pe=He(B,"WeakMap"),he=He(Object,"create"),de=Xe(ce),ve=Xe(ue),ye=Xe(fe),ge=Xe(le),me=Xe(pe),_e=te?te.prototype:void 0,be=_e?_e.valueOf:void 0,we=_e?_e.toString:void 0;function Ce(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ke(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Se(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function xe(e){var t=-1,r=e?e.length:0;for(this.__data__=new Se;++t<r;)this.add(e[t])}function Ae(e){this.__data__=new ke(e)}function je(e,t){var r=et(e)||Ye(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,i=!!n;for(var o in e)!t&&!Q.call(e,o)||i&&("length"==o||Ke(o,n))||r.push(o);return r}function Oe(e,t){for(var r=e.length;r--;)if(Qe(e[r][0],t))return r;return-1}function Ie(e,t){for(var r=0,n=(t=$e(t,e)?[t]:Pe(t)).length;null!=e&&r<n;)e=e[Je(t[r++])];return r&&r==n?e:void 0}function Ee(e,t){return null!=e&&t in Object(e)}function Fe(e,t,r,n,i){return e===t||(null==e||null==t||!it(e)&&!ot(t)?e!=e&&t!=t:function(e,t,r,n,i,f){var l=et(e),v=et(t),b=a,k=a;l||(b=(b=Ne(e))==o?d:b);v||(k=(k=Ne(t))==o?d:k);var S=b==d&&!L(e),x=k==d&&!L(t),A=b==k;if(A&&!S)return f||(f=new Ae),l||ct(e)?Re(e,t,r,n,i,f):function(e,t,r,n,i,o,a){switch(r){case C:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!n(new re(e),new re(t)));case s:case c:case h:return Qe(+e,+t);case u:return e.name==t.name&&e.message==t.message;case y:case m:return e==t+"";case p:var f=N;case g:var l=2&o;if(f||(f=$),e.size!=t.size&&!l)return!1;var d=a.get(e);if(d)return d==t;o|=1,a.set(e,t);var v=Re(f(e),f(t),n,i,o,a);return a.delete(e),v;case _:if(be)return be.call(e)==be.call(t)}return!1}(e,t,b,r,n,i,f);if(!(2&i)){var j=S&&Q.call(e,"__wrapped__"),O=x&&Q.call(t,"__wrapped__");if(j||O){var I=j?e.value():e,E=O?t.value():t;return f||(f=new Ae),r(I,E,n,i,f)}}if(!A)return!1;return f||(f=new Ae),function(e,t,r,n,i,o){var a=2&i,s=ut(e),c=s.length,u=ut(t).length;if(c!=u&&!a)return!1;var f=c;for(;f--;){var l=s[f];if(!(a?l in t:Q.call(t,l)))return!1}var p=o.get(e);if(p&&o.get(t))return p==t;var h=!0;o.set(e,t),o.set(t,e);var d=a;for(;++f<c;){var v=e[l=s[f]],y=t[l];if(n)var g=a?n(y,v,l,t,e,o):n(v,y,l,e,t,o);if(!(void 0===g?v===y||r(v,y,n,i,o):g)){h=!1;break}d||(d="constructor"==l)}if(h&&!d){var m=e.constructor,_=t.constructor;m==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof _&&_ instanceof _||(h=!1)}return o.delete(e),o.delete(t),h}(e,t,r,n,i,f)}(e,t,Fe,r,n,i))}function De(e){return!(!it(e)||(t=e,X&&X in t))&&(rt(e)||L(e)?ee:O).test(Xe(e));var t}function Be(e){return"function"==typeof e?e:null==e?lt:"object"==n(e)?et(e)?function(e,t){if($e(e)&&Ve(t))return Ge(Je(e),t);return function(r){var n=function(e,t,r){var n=null==e?void 0:Ie(e,t);return void 0===n?r:n}(r,e);return void 0===n&&n===t?function(e,t){return null!=e&&function(e,t,r){t=$e(t,e)?[t]:Pe(t);var n,i=-1,o=t.length;for(;++i<o;){var a=Je(t[i]);if(!(n=null!=e&&r(e,a)))break;e=e[a]}if(n)return n;return!!(o=e?e.length:0)&&nt(o)&&Ke(a,o)&&(et(e)||Ye(e))}(e,t,Ee)}(r,e):Fe(t,n,void 0,3)}}(e[0],e[1]):function(e){var t=function(e){var t=ut(e),r=t.length;for(;r--;){var n=t[r],i=e[n];t[r]=[n,i,Ve(i)]}return t}(e);if(1==t.length&&t[0][2])return Ge(t[0][0],t[0][1]);return function(r){return r===e||function(e,t,r,n){var i=r.length,o=i,a=!n;if(null==e)return!o;for(e=Object(e);i--;){var s=r[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var c=(s=r[i])[0],u=e[c],f=s[1];if(a&&s[2]){if(void 0===u&&!(c in e))return!1}else{var l=new Ae;if(n)var p=n(u,f,c,e,t,l);if(!(void 0===p?Fe(f,u,n,3,l):p))return!1}}return!0}(r,e,t)}}(e):$e(t=e)?(r=Je(t),function(e){return null==e?void 0:e[r]}):function(e){return function(t){return Ie(t,e)}}(t);var t,r}function Te(e){if(!it(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=We(e),r=[];for(var n in e)("constructor"!=n||!t&&Q.call(e,n))&&r.push(n);return r}function Pe(e){return et(e)?e:qe(e)}function Re(e,t,r,n,i,o){var a=2&i,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;var u=o.get(e);if(u&&o.get(t))return u==t;var f=-1,l=!0,p=1&i?new xe:void 0;for(o.set(e,t),o.set(t,e);++f<s;){var h=e[f],d=t[f];if(n)var v=a?n(d,h,f,t,e,o):n(h,d,f,e,t,o);if(void 0!==v){if(v)continue;l=!1;break}if(p){if(!U(t,(function(e,t){if(!p.has(t)&&(h===e||r(h,e,n,i,o)))return p.add(t)}))){l=!1;break}}else if(h!==d&&!r(h,d,n,i,o)){l=!1;break}}return o.delete(e),o.delete(t),l}function Me(e){return function(e,t,r){var n=t(e);return et(e)?n:H(n,r(e))}(e,ft,Le)}function ze(e,t){var r=e.__data__;return function(e){var t=n(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function He(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return De(r)?r:void 0}Ce.prototype.clear=function(){this.__data__=he?he(null):{}},Ce.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Ce.prototype.get=function(e){var t=this.__data__;if(he){var n=t[e];return n===r?void 0:n}return Q.call(t,e)?t[e]:void 0},Ce.prototype.has=function(e){var t=this.__data__;return he?void 0!==t[e]:Q.call(t,e)},Ce.prototype.set=function(e,t){return this.__data__[e]=he&&void 0===t?r:t,this},ke.prototype.clear=function(){this.__data__=[]},ke.prototype.delete=function(e){var t=this.__data__,r=Oe(t,e);return!(r<0)&&(r==t.length-1?t.pop():oe.call(t,r,1),!0)},ke.prototype.get=function(e){var t=this.__data__,r=Oe(t,e);return r<0?void 0:t[r][1]},ke.prototype.has=function(e){return Oe(this.__data__,e)>-1},ke.prototype.set=function(e,t){var r=this.__data__,n=Oe(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},Se.prototype.clear=function(){this.__data__={hash:new Ce,map:new(ue||ke),string:new Ce}},Se.prototype.delete=function(e){return ze(this,e).delete(e)},Se.prototype.get=function(e){return ze(this,e).get(e)},Se.prototype.has=function(e){return ze(this,e).has(e)},Se.prototype.set=function(e,t){return ze(this,e).set(e,t),this},xe.prototype.add=xe.prototype.push=function(e){return this.__data__.set(e,r),this},xe.prototype.has=function(e){return this.__data__.has(e)},Ae.prototype.clear=function(){this.__data__=new ke},Ae.prototype.delete=function(e){return this.__data__.delete(e)},Ae.prototype.get=function(e){return this.__data__.get(e)},Ae.prototype.has=function(e){return this.__data__.has(e)},Ae.prototype.set=function(e,t){var r=this.__data__;if(r instanceof ke){var n=r.__data__;if(!ue||n.length<199)return n.push([e,t]),this;r=this.__data__=new Se(n)}return r.set(e,t),this};var Ue=ae?K(ae,Object):pt,Le=ae?function(e){for(var t=[];e;)H(t,Ue(e)),e=ne(e);return t}:pt,Ne=function(e){return Y.call(e)};function Ke(e,t){return!!(t=null==t?i:t)&&("number"==typeof e||I.test(e))&&e>-1&&e%1==0&&e<t}function $e(e,t){if(et(e))return!1;var r=n(e);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!at(e))||(S.test(e)||!k.test(e)||null!=t&&e in Object(t))}function We(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||q)}function Ve(e){return e==e&&!it(e)}function Ge(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}(ce&&Ne(new ce(new ArrayBuffer(1)))!=C||ue&&Ne(new ue)!=p||fe&&Ne(fe.resolve())!=v||le&&Ne(new le)!=g||pe&&Ne(new pe)!=b)&&(Ne=function(e){var t=Y.call(e),r=t==d?e.constructor:void 0,n=r?Xe(r):void 0;if(n)switch(n){case de:return C;case ve:return p;case ye:return v;case ge:return g;case me:return b}return t});var qe=Ze((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(at(e))return we?we.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var r=[];return x.test(e)&&r.push(""),e.replace(A,(function(e,t,n,i){r.push(n?i.replace(j,"$1"):t||e)})),r}));function Je(e){if("string"==typeof e||at(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Xe(e){if(null!=e){try{return Z.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ze(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function r(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a),a};return r.cache=new(Ze.Cache||Se),r}function Qe(e,t){return e===t||e!=e&&t!=t}function Ye(e){return function(e){return ot(e)&&tt(e)}(e)&&Q.call(e,"callee")&&(!ie.call(e,"callee")||Y.call(e)==o)}Ze.Cache=Se;var et=Array.isArray;function tt(e){return null!=e&&nt(e.length)&&!rt(e)}function rt(e){var t=it(e)?Y.call(e):"";return t==f||"[object GeneratorFunction]"==t}function nt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function it(e){var t=n(e);return!!e&&("object"==t||"function"==t)}function ot(e){return!!e&&"object"==n(e)}function at(e){return"symbol"==n(e)||ot(e)&&Y.call(e)==_}var st,ct=z?(st=z,function(e){return st(e)}):function(e){return ot(e)&&nt(e.length)&&!!E[Y.call(e)]};function ut(e){return tt(e)?je(e):function(e){if(!We(e))return se(e);var t=[];for(var r in Object(e))Q.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}function ft(e){return tt(e)?je(e,!0):Te(e)}function lt(e){return e}function pt(){return[]}e.exports=function(e,t){return null==e?{}:function(e,t,r){for(var n=-1,i=t.length,o={};++n<i;){var a=t[n],s=e[a];r(s,a)&&(o[a]=s)}return o}(e,Me(e),Be(t))}}({get exports(){return zt},set exports(e){zt=e}},zt);var Ht=zt,Ut=9007199254740991,Lt="[object Arguments]",Nt="[object Function]",Kt="[object GeneratorFunction]",$t="[object Symbol]",Wt="object"==n(l)&&l&&l.Object===Object&&l,Vt="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,Gt=Wt||Vt||Function("return this")();function qt(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var Jt=Object.prototype,Xt=Jt.hasOwnProperty,Zt=Jt.toString,Qt=Gt.Symbol,Yt=Jt.propertyIsEnumerable,er=Qt?Qt.isConcatSpreadable:void 0,tr=Math.max;function rr(e,t,r,n,i){var o=-1,a=e.length;for(r||(r=nr),i||(i=[]);++o<a;){var s=e[o];t>0&&r(s)?t>1?rr(s,t-1,r,n,i):qt(i,s):n||(i[i.length]=s)}return i}function nr(e){return sr(e)||function(e){return function(e){return cr(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Ut}(e.length)&&!function(e){var t=function(e){var t=n(e);return!!e&&("object"==t||"function"==t)}(e)?Zt.call(e):"";return t==Nt||t==Kt}(e)}(e)}(e)&&Xt.call(e,"callee")&&(!Yt.call(e,"callee")||Zt.call(e)==Lt)}(e)||!!(er&&e&&e[er])}function ir(e){if("string"==typeof e||function(e){return"symbol"==n(e)||cr(e)&&Zt.call(e)==$t}(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}var or,ar,sr=Array.isArray;function cr(e){return!!e&&"object"==n(e)}or=function(e,t){return null==e?{}:function(e,t){return function(e,t,r){for(var n=-1,i=t.length,o={};++n<i;){var a=t[n],s=e[a];r(s,a)&&(o[a]=s)}return o}(e=Object(e),t,(function(t,r){return r in e}))}(e,function(e,t){for(var r=-1,n=e?e.length:0,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}(rr(t,1),ir))},ar=tr(void 0===ar?or.length-1:ar,0);var ur="object"==n(l)&&l&&l.Object===Object&&l,fr="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,lr=(ur||fr||Function("return this")()).Symbol,pr=lr?lr.prototype:void 0;pr&&pr.toString;var hr=function(e){return!Mt(e)},dr=function(e){return function(e){return!Pt(e)}(e)&&function(e){return null!=e}(e)},vr=function(e){return Ht(e,dr)};var yr={};!function(e,t){e.exports=function(e){return function(t){var r=e,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,s=[],c=[];!function(){function e(e){for(var r=t.sqrt(e),n=2;n<=r;n++)if(!(e%n))return!1;return!0}function r(e){return 4294967296*(e-(0|e))|0}for(var n=2,i=0;i<64;)e(n)&&(i<8&&(s[i]=r(t.pow(n,.5))),c[i]=r(t.pow(n,1/3)),i++),n++}();var u=[],f=a.SHA256=o.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],f=r[5],l=r[6],p=r[7],h=0;h<64;h++){if(h<16)u[h]=0|e[t+h];else{var d=u[h-15],v=(d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3,y=u[h-2],g=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;u[h]=v+u[h-7]+g+u[h-16]}var m=n&i^n&o^i&o,_=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),b=p+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&f^~s&l)+c[h]+u[h];p=l,l=f,f=s,s=a+b|0,a=o,o=i,i=n,n=b+(_+m)|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+a|0,r[4]=r[4]+s|0,r[5]=r[5]+f|0,r[6]=r[6]+l|0,r[7]=r[7]+p|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return r[i>>>5]|=128<<24-i%32,r[14+(i+64>>>9<<4)]=t.floor(n/4294967296),r[15+(i+64>>>9<<4)]=n,e.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});r.SHA256=o._createHelper(f),r.HmacSHA256=o._createHmacHelper(f)}(Math),e.SHA256}(w())}({get exports(){return yr},set exports(e){yr=e}});var gr,mr=yr,_r=function(e,t){hr(t)?window.snaptr("track",e,t):window.snaptr("track",e)},br=function(e,t,r){var n={price:parseFloat(h(e,"properties.price")),client_deduplication_id:h(e,"properties.client_deduplication_id"),currency:h(e,"properties.currency"),transaction_id:h(e,"properties.transactionId")||h(e,"properties.transaction_id"),item_category:h(e,"properties.category"),description:h(e,"properties.description"),search_string:h(e,"properties.search_string"),number_items:parseInt(h(e,"properties.number_items"),10),payment_info_available:parseInt(h(e,"properties.payment_info_available"),10),sign_up_method:h(e,"properties.sign_up_method"),success:parseInt(h(e,"properties.success"),10)};return 0!==n.payment_info_available&&1!==n.payment_info_available&&(n.payment_info_available=null),0!==n.success&&1!==n.success&&(n.success=null),r&&(n.client_deduplication_id=h(e,"".concat(t||"messageId"))),n=vr(n)},wr=function(e,t,r){var n=br(e,t,r);return n.item_ids=h(e,"properties.item_ids"),n=vr(n)},Cr=function(e,t,n,i){var o=br(t,n,i);switch(e.toLowerCase().trim()){case"order completed":var a=[],s=h(t,"properties.products");s&&Array.isArray(s)?s.forEach((function(e,t){var r=e.product_id;r?a.push(r):X("product_id not present for product at index ".concat(t))})):a=null,o=r(r({},o),{},{transaction_id:h(t,"properties.order_id"),item_ids:a});break;case"checkout started":var c=[],u=h(t,"properties.products");u&&Array.isArray(u)?u.forEach((function(e,t){var r=e.product_id;r?c.push(r):X("product_id not present for product at index ".concat(t))})):c=null,o=r(r({},o),{},{transaction_id:h(t,"properties.order_id"),item_ids:c});break;case"product added":var f=[],l=h(t,"properties.product_id");dr(l)?f.push(l):(X("product_id is not present"),f=null),o=r(r({},o),{},{item_ids:f});break;case"payment info entered":o=r(r({},o),{},{transaction_id:h(t,"properties.checkout_id"),item_ids:h(t,"properties.item_ids")});break;case"promotion clicked":case"promotion viewed":o=r(r({},o),{},{item_ids:h(t,"properties.item_ids")});break;case"product added to wishlist":var p=[],d=h(t,"properties.product_id");dr(d)?p.push(d):(X("product_id is not present"),p=null),o=r(r({},o),{},{item_ids:p});break;case"product viewed":var v=[],y=h(t,"properties.product_id");y?v.push(y):(X("product_id is not present"),v=null),o=r(r({},o),{},{item_ids:v});break;case"product list viewed":var g=[],m=h(t,"properties.products");m&&Array.isArray(m)?m.forEach((function(e,t){var r=h(e,"product_id");r?g.push(r):X("product_id not present for product at index ".concat(t))})):g=null,o=r(r({},o),{},{item_ids:g});break;case"products searched":o=r(r({},o),{},{search_string:h(t,"properties.query"),item_ids:h(t,"properties.item_ids")})}return o=vr(o)},kr=function(e,t,r){var n={};return"sha256"===e?(t&&(n.user_hashed_email=mr(t).toString()),r&&(n.user_hashed_phone_number=mr(r).toString())):(t&&(n.user_email=t),r&&(n.user_phone_number=r)),n},Sr="SNAP_PIXEL";s(gr={},Sr,Sr),s(gr,"Snap_Pixel",Sr),s(gr,"SnapPixel",Sr),s(gr,"SNAPPIXEL",Sr),s(gr,"snappixel",Sr),s(gr,"Snap Pixel",Sr),s(gr,"SNAP PIXEL",Sr),s(gr,"snap pixel",Sr);var xr=function(){function e(t,r,n){i(this,e),r.logLevel&&J(r.logLevel),this.pixelId=t.pixelId,this.hashMethod=t.hashMethod,this.name=Sr,this.deduplicationKey=t.deduplicationKey,this.enableDeduplication=t.enableDeduplication,this.eventMappingFromConfig=t.eventMappingFromConfig,this.trackEvents=["SIGN_UP","OPEN_APP","SAVE","SUBSCRIBE","COMPLETE_TUTORIAL","INVITE","LOGIN","SHARE","RESERVE","ACHIEVEMENT_UNLOCKED","SPENT_CREDITS","RATE","START_TRIAL","LIST_VIEW"],this.ecomEvents={PURCHASE:"PURCHASE",START_CHECKOUT:"START_CHECKOUT",ADD_CART:"ADD_CART",ADD_BILLING:"ADD_BILLING",AD_CLICK:"AD_CLICK",AD_VIEW:"AD_VIEW",ADD_TO_WISHLIST:"ADD_TO_WISHLIST",VIEW_CONTENT:"VIEW_CONTENT",SEARCH:"SEARCH"},this.customEvents=["custom_event_1","custom_event_2","custom_event_3","custom_event_4","custom_event_5"],this.areTransformationsConnected=n&&n.areTransformationsConnected,this.destinationId=n&&n.destinationId}return a(e,[{key:"init",value:function(){X("===In init SnapPixel==="),function(e,t,r){if(!e.snaptr){var n=e.snaptr=function(){n.handleRequest?n.handleRequest.apply(n,arguments):n.queue.push(arguments)};n.queue=[];var i="script",o=t.createElement(i);o.async=!0,o.src="https://sc-static.net/scevent.min.js",o.setAttribute("data-loader","RS_JS_SDK");var a=t.getElementsByTagName(i)[0];a.parentNode.insertBefore(o,a)}}(window,document);var e=Tt.getUserTraits(),t=null==e?void 0:e.email,r=null==e?void 0:e.phone,n=kr(this.hashMethod,t,r);n=vr(n),window.snaptr("init",this.pixelId,n)}},{key:"isLoaded",value:function(){return X("===In isLoaded SnapPixel==="),!!window.snaptr}},{key:"isReady",value:function(){return X("===In isReady SnapPixel==="),!!window.snaptr}},{key:"identify",value:function(e){X("===In SnapPixel identify");var t=e.message,n=h(t,"context.traits.email"),i=h(t,"context.traits.phone"),o=h(t,"context.ip")||h(t,"request_ip"),a={};n||i||o?(a=r(r({},a=kr(this.hashMethod,n,i)),{},{ip_address:o}),a=vr(a),window.snaptr("init",this.pixelId,a)):Z("User parameter (email or phone number or ip address) is required for Identify call.")}},{key:"track",value:function(e){var t=this;X("===In SnapPixel track===");var r=e.message,n=r.event,i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"from",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"to",n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i={};return Array.isArray(e)&&e.forEach((function(e){if(hr(e[t])){var o=n?e[t].toLowerCase().trim():e[t].trim();i[o]?i[o].includes(e[r])||i[o].push(e[r]):i[o]=[e[r]]}})),i}(this.eventMappingFromConfig,"from","to",!1);if(n)try{if(i[n]){var o=function(e,t){return t[e]?t[e]:null}(n,i);o.forEach((function(e){_r(e,Cr(n,r,t.deduplicationKey,t.enableDeduplication))}))}else switch(n.toLowerCase().trim()){case"order completed":_r(this.ecomEvents.PURCHASE,Cr(n,r,this.deduplicationKey,this.enableDeduplication));break;case"checkout started":_r(this.ecomEvents.START_CHECKOUT,Cr(n,r,this.deduplicationKey,this.enableDeduplication));break;case"product added":_r(this.ecomEvents.ADD_CART,Cr(n,r,this.deduplicationKey,this.enableDeduplication));break;case"payment info entered":_r(this.ecomEvents.ADD_BILLING,Cr(n,r,this.deduplicationKey,this.enableDeduplication));break;case"promotion clicked":_r(this.ecomEvents.AD_CLICK,Cr(n,r,this.deduplicationKey,this.enableDeduplication));break;case"promotion viewed":_r(this.ecomEvents.AD_VIEW,Cr(n,r,this.deduplicationKey,this.enableDeduplication));break;case"product added to wishlist":_r(this.ecomEvents.ADD_TO_WISHLIST,Cr(n,r,this.deduplicationKey,this.enableDeduplication));break;case"product viewed":case"product list viewed":_r(this.ecomEvents.VIEW_CONTENT,Cr(n,r,this.deduplicationKey,this.enableDeduplication));break;case"products searched":_r(this.ecomEvents.SEARCH,Cr(n,r,this.deduplicationKey,this.enableDeduplication));break;default:if(!this.trackEvents.includes(n.trim().toUpperCase())&&!this.customEvents.includes(n.trim().toLowerCase()))return void Z("Event doesn't match with Snap Pixel Events!");_r(n,wr(r,this.deduplicationKey,this.enableDeduplication))}}catch(e){Z("[Snap Pixel] track failed with following error",e)}else Z("Event name not present")}},{key:"page",value:function(e){X("===In SnapPixel page===");var t=e.message;_r("PAGE_VIEW",wr(t,this.deduplicationKey,this.enableDeduplication))}}]),e}();return e.SnapPixel=xr,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=SnapPixel.min.js.map
