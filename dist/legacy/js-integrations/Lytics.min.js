var Lytics_RS=function(t){"use strict";function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function n(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?e(Object(i),!0).forEach((function(e){r(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,a(i.key),i)}}function r(t,e,n){return(e=a(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var o,s=4,c=function(t){switch(t.toUpperCase()){case"INFO":s=1;break;case"DEBUG":s=2;break;case"WARN":s=3;break;default:s=4}},l=function(){var t;s<=2&&(t=console).log.apply(t,arguments)},u="LYTICS";r(o={},u,u),r(o,"Lytics",u),r(o,"lytics",u);var d=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n.logLevel&&c(n.logLevel),this.accountId=e.accountId,this.stream=e.stream,this.blockload=e.blockload,this.loadid=e.loadid,this.name=u,this.forFirstName=["firstname","firstName"],this.forLastName=["lastname","lastName"],this.areTransformationsConnected=i&&i.areTransformationsConnected,this.destinationId=i&&i.destinationId}var e,r,a;return e=t,r=[{key:"loadLyticsScript",value:function(){!function(){var t=window.jstag||(window.jstag={}),e=[];function n(n){t[n]=function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];e.push([n,i])}}n("send"),n("mock"),n("identify"),n("pageView"),n("unblock"),n("getid"),n("setid"),n("loadEntity"),n("getEntity"),n("on"),n("once"),n("call"),t.loadScript=function(t,e,n){var i=document.createElement("script");i.async=!0,i.src=t,i.onload=e,i.onerror=n,i.setAttribute("data-loader","RS_JS_SDK");var r=document.getElementsByTagName("script")[0],a=r&&r.parentNode||document.head||document.body,o=r||a.lastChild;return null!=o?a.insertBefore(i,o):a.appendChild(i),this},t.init=function n(i){return this.config=i,this.loadScript(i.src,(function(){if(t.init===n)throw new Error("Load error!");t.init(t.config),function(){for(var n=0;n<e.length;n++){var i=e[n][0],r=e[n][1];t[i].apply(t,r)}e=void 0}()})),this}}(),window.jstag.init({loadid:this.loadid,blocked:this.blockload,stream:this.stream,sessecs:1800,src:"https:"===document.location.protocol?"https://c.lytics.io/api/tag/".concat(this.accountId,"/latest.min.js"):"http://c.lytics.io/api/tag/".concat(this.accountId,"/latest.min.js"),pageAnalysis:{dataLayerPull:{disabled:!0}}})}},{key:"init",value:function(){this.loadLyticsScript(),l("===in init Lytics===")}},{key:"isLoaded",value:function(){return l("in Lytics isLoaded"),l(!(!window.jstag||window.jstag.push===Array.prototype.push)),!(!window.jstag||window.jstag.push===Array.prototype.push)}},{key:"isReady",value:function(){return l("in Lytics isReady"),!(!window.jstag||window.jstag.push===Array.prototype.push)}},{key:"identify",value:function(t){l("in Lytics identify");var e=n({user_id:t.message.userId||t.message.anonymousId},t.message.context.traits);this.handleName(e),window.jstag.send(this.stream,e)}},{key:"page",value:function(t){l("in Lytics page");var e=t.message.properties,i=n({event:t.message.name},e);this.handleName(i),window.jstag.pageView(this.stream,i)}},{key:"track",value:function(t){l("in Lytics track");var e=t.message.properties,i=n({_e:t.message.event},e);this.handleName(i),window.jstag.send(this.stream,i)}},{key:"handleName",value:function(t){return this.forFirstName.forEach((function(e){t[e]&&(t.first_name=t[e],delete t[e])})),this.forLastName.forEach((function(e){t[e]&&(t.last_name=t[e],delete t[e])})),t}}],r&&i(e.prototype,r),a&&i(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();return t.Lytics=d,Object.defineProperty(t,"__esModule",{value:!0}),t}({});
//# sourceMappingURL=Lytics.min.js.map
