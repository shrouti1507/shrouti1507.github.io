var Comscore_RS=function(e){"use strict";function t(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function i(e,t,i){return(t=o(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function o(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var r,n=4,a=function(e){switch(e.toUpperCase()){case"INFO":n=1;break;case"DEBUG":n=2;break;case"WARN":n=3;break;default:n=4}},s=function(){var e;n<=2&&(e=console).log.apply(e,arguments)},c=1e3,u="COMSCORE";i(r={},u,u),i(r,"Comscore",u),i(r,"Com Score",u),i(r,"com Score",u),i(r,"com score",u),i(r,"Com score",u);var l=function(){function e(t,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i.logLevel&&a(i.logLevel),this.c2ID=t.c2ID,this.analytics=i,this.comScoreBeaconParam=t.comScoreBeaconParam?t.comScoreBeaconParam:{},this.isFirstPageCallMade=!1,this.failed=!1,this.comScoreParams={},this.replayEvents=[],this.name=u,this.areTransformationsConnected=o&&o.areTransformationsConnected,this.destinationId=o&&o.destinationId}var i,o,r;return i=e,o=[{key:"init",value:function(){s("===in init Comscore init===")}},{key:"identify",value:function(e){s("in Comscore identify")}},{key:"track",value:function(e){s("in Comscore track")}},{key:"page",value:function(e){if(s("in Comscore page"),this.loadConfig(e),this.isFirstPageCallMade){if(this.failed)return void(this.replayEvents=[]);if(!this.isLoaded()&&!this.failed)return void this.replayEvents.push(["page",e]);e.message.properties,window.COMSCORE.beacon(this.comScoreParams)}else this.isFirstPageCallMade=!0,this.initAfterPage()}},{key:"loadConfig",value:function(e){s("=====in loadConfig====="),this.comScoreParams=this.mapComscoreParams(e.message.properties),window._comscore=window._comscore||[],window._comscore.push(this.comScoreParams)}},{key:"initAfterPage",value:function(){var e,t;s("=====in initAfterPage====="),e=document.createElement("script"),t=document.getElementsByTagName("script")[0],e.async=!0,e.setAttribute("data-loader","RS_JS_SDK"),e.src="".concat("https:"==document.location.protocol?"https://sb":"http://b",".scorecardresearch.com/beacon.js"),t.parentNode.insertBefore(e,t),this._isReady(this).then((function(e){e.replayEvents.forEach((function(t){e[t[0]](t[1])}))}))}},{key:"pause",value:function(e){return new Promise((function(t){setTimeout(t,e)}))}},{key:"_isReady",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Promise((function(o){return t.isLoaded()?(t.failed=!1,e.analytics.emit("ready"),o(e)):i>=1e4?(t.failed=!0,o(e)):void t.pause(c).then((function(){return t._isReady(e,i+c).then(o)}))}))}},{key:"mapComscoreParams",value:function(e){s("=====in mapComscoreParams=====");var t=this.comScoreBeaconParam,i={};return Object.keys(t).forEach((function(o){if(o in e){var r=t[o],n=e[o];i[r]=n}})),i.c1="2",i.c2=this.c2ID,s("=====in mapComscoreParams=====",i),i}},{key:"isLoaded",value:function(){return s("in Comscore isLoaded"),!this.isFirstPageCallMade||!!window.COMSCORE}},{key:"isReady",value:function(){return!!window.COMSCORE}}],o&&t(i.prototype,o),r&&t(i,r),Object.defineProperty(i,"prototype",{writable:!1}),e}();return e.Comscore=l,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=Comscore.min.js.map
