{"version":3,"file":"MoEngage.min.js","sources":["../../../node_modules/@ndhoule/keys/index.js","../../../src/integrations/MoEngage/constants.js","../../../node_modules/@ndhoule/each/index.js","../../../src/utils/logUtil.js","../../../src/integrations/MoEngage/browser.js","../../../src/utils/ScriptLoader.js"],"sourcesContent":["'use strict';\n\nvar hop = Object.prototype.hasOwnProperty;\nvar strCharAt = String.prototype.charAt;\nvar toStr = Object.prototype.toString;\n\n/**\n * Returns the character at a given index.\n *\n * @param {string} str\n * @param {number} index\n * @return {string|undefined}\n */\n// TODO: Move to a library\nvar charAt = function(str, index) {\n  return strCharAt.call(str, index);\n};\n\n/**\n * hasOwnProperty, wrapped as a function.\n *\n * @name has\n * @api private\n * @param {*} context\n * @param {string|number} prop\n * @return {boolean}\n */\n\n// TODO: Move to a library\nvar has = function has(context, prop) {\n  return hop.call(context, prop);\n};\n\n/**\n * Returns true if a value is a string, otherwise false.\n *\n * @name isString\n * @api private\n * @param {*} val\n * @return {boolean}\n */\n\n// TODO: Move to a library\nvar isString = function isString(val) {\n  return toStr.call(val) === '[object String]';\n};\n\n/**\n * Returns true if a value is array-like, otherwise false. Array-like means a\n * value is not null, undefined, or a function, and has a numeric `length`\n * property.\n *\n * @name isArrayLike\n * @api private\n * @param {*} val\n * @return {boolean}\n */\n// TODO: Move to a library\nvar isArrayLike = function isArrayLike(val) {\n  return val != null && (typeof val !== 'function' && typeof val.length === 'number');\n};\n\n\n/**\n * indexKeys\n *\n * @name indexKeys\n * @api private\n * @param {} target\n * @param {Function} pred\n * @return {Array}\n */\nvar indexKeys = function indexKeys(target, pred) {\n  pred = pred || has;\n\n  var results = [];\n\n  for (var i = 0, len = target.length; i < len; i += 1) {\n    if (pred(target, i)) {\n      results.push(String(i));\n    }\n  }\n\n  return results;\n};\n\n/**\n * Returns an array of an object's owned keys.\n *\n * @name objectKeys\n * @api private\n * @param {*} target\n * @param {Function} pred Predicate function used to include/exclude values from\n * the resulting array.\n * @return {Array}\n */\nvar objectKeys = function objectKeys(target, pred) {\n  pred = pred || has;\n\n  var results = [];\n\n  for (var key in target) {\n    if (pred(target, key)) {\n      results.push(String(key));\n    }\n  }\n\n  return results;\n};\n\n/**\n * Creates an array composed of all keys on the input object. Ignores any non-enumerable properties.\n * More permissive than the native `Object.keys` function (non-objects will not throw errors).\n *\n * @name keys\n * @api public\n * @category Object\n * @param {Object} source The value to retrieve keys from.\n * @return {Array} An array containing all the input `source`'s keys.\n * @example\n * keys({ likes: 'avocado', hates: 'pineapple' });\n * //=> ['likes', 'pineapple'];\n *\n * // Ignores non-enumerable properties\n * var hasHiddenKey = { name: 'Tim' };\n * Object.defineProperty(hasHiddenKey, 'hidden', {\n *   value: 'i am not enumerable!',\n *   enumerable: false\n * })\n * keys(hasHiddenKey);\n * //=> ['name'];\n *\n * // Works on arrays\n * keys(['a', 'b', 'c']);\n * //=> ['0', '1', '2']\n *\n * // Skips unpopulated indices in sparse arrays\n * var arr = [1];\n * arr[4] = 4;\n * keys(arr);\n * //=> ['0', '4']\n */\nvar keys = function keys(source) {\n  if (source == null) {\n    return [];\n  }\n\n  // IE6-8 compatibility (string)\n  if (isString(source)) {\n    return indexKeys(source, charAt);\n  }\n\n  // IE6-8 compatibility (arguments)\n  if (isArrayLike(source)) {\n    return indexKeys(source, has);\n  }\n\n  return objectKeys(source);\n};\n\n/*\n * Exports.\n */\n\nmodule.exports = keys;\n","const NAME = 'MOENGAGE';\nconst CNameMapping = {\n  [NAME]: NAME,\n  MoEngage: NAME,\n  moengage: NAME,\n  Moengage: NAME,\n  'Mo Engage': NAME,\n  'mo engage': NAME,\n  'Mo engage': NAME,\n};\n\nexport { NAME, CNameMapping };\n","'use strict';\n\n/*\n * Module dependencies.\n */\n\nvar keys = require('@ndhoule/keys');\n\nvar objToString = Object.prototype.toString;\n\n/**\n * Tests if a value is a number.\n *\n * @name isNumber\n * @api private\n * @param {*} val The value to test.\n * @return {boolean} Returns `true` if `val` is a number, otherwise `false`.\n */\n// TODO: Move to library\nvar isNumber = function isNumber(val) {\n  var type = typeof val;\n  return type === 'number' || (type === 'object' && objToString.call(val) === '[object Number]');\n};\n\n/**\n * Tests if a value is an array.\n *\n * @name isArray\n * @api private\n * @param {*} val The value to test.\n * @return {boolean} Returns `true` if the value is an array, otherwise `false`.\n */\n// TODO: Move to library\nvar isArray = typeof Array.isArray === 'function' ? Array.isArray : function isArray(val) {\n  return objToString.call(val) === '[object Array]';\n};\n\n/**\n * Tests if a value is array-like. Array-like means the value is not a function and has a numeric\n * `.length` property.\n *\n * @name isArrayLike\n * @api private\n * @param {*} val\n * @return {boolean}\n */\n// TODO: Move to library\nvar isArrayLike = function isArrayLike(val) {\n  return val != null && (isArray(val) || (val !== 'function' && isNumber(val.length)));\n};\n\n/**\n * Internal implementation of `each`. Works on arrays and array-like data structures.\n *\n * @name arrayEach\n * @api private\n * @param {Function(value, key, collection)} iterator The function to invoke per iteration.\n * @param {Array} array The array(-like) structure to iterate over.\n * @return {undefined}\n */\nvar arrayEach = function arrayEach(iterator, array) {\n  for (var i = 0; i < array.length; i += 1) {\n    // Break iteration early if `iterator` returns `false`\n    if (iterator(array[i], i, array) === false) {\n      break;\n    }\n  }\n};\n\n/**\n * Internal implementation of `each`. Works on objects.\n *\n * @name baseEach\n * @api private\n * @param {Function(value, key, collection)} iterator The function to invoke per iteration.\n * @param {Object} object The object to iterate over.\n * @return {undefined}\n */\nvar baseEach = function baseEach(iterator, object) {\n  var ks = keys(object);\n\n  for (var i = 0; i < ks.length; i += 1) {\n    // Break iteration early if `iterator` returns `false`\n    if (iterator(object[ks[i]], ks[i], object) === false) {\n      break;\n    }\n  }\n};\n\n/**\n * Iterate over an input collection, invoking an `iterator` function for each element in the\n * collection and passing to it three arguments: `(value, index, collection)`. The `iterator`\n * function can end iteration early by returning `false`.\n *\n * @name each\n * @api public\n * @param {Function(value, key, collection)} iterator The function to invoke per iteration.\n * @param {Array|Object|string} collection The collection to iterate over.\n * @return {undefined} Because `each` is run only for side effects, always returns `undefined`.\n * @example\n * var log = console.log.bind(console);\n *\n * each(log, ['a', 'b', 'c']);\n * //-> 'a', 0, ['a', 'b', 'c']\n * //-> 'b', 1, ['a', 'b', 'c']\n * //-> 'c', 2, ['a', 'b', 'c']\n * //=> undefined\n *\n * each(log, 'tim');\n * //-> 't', 2, 'tim'\n * //-> 'i', 1, 'tim'\n * //-> 'm', 0, 'tim'\n * //=> undefined\n *\n * // Note: Iteration order not guaranteed across environments\n * each(log, { name: 'tim', occupation: 'enchanter' });\n * //-> 'tim', 'name', { name: 'tim', occupation: 'enchanter' }\n * //-> 'enchanter', 'occupation', { name: 'tim', occupation: 'enchanter' }\n * //=> undefined\n */\nvar each = function each(iterator, collection) {\n  return (isArrayLike(collection) ? arrayEach : baseEach).call(this, iterator, collection);\n};\n\n/*\n * Exports.\n */\n\nmodule.exports = each;\n","const LOG_LEVEL_INFO = 1;\nconst LOG_LEVEL_DEBUG = 2;\nconst LOG_LEVEL_WARN = 3;\nconst LOG_LEVEL_ERROR = 4;\nconst DEF_LOG_LEVEL = LOG_LEVEL_ERROR;\nlet LOG_LEVEL = DEF_LOG_LEVEL;\n\nconst logger = {\n  setLogLevel(logLevel) {\n    switch (logLevel.toUpperCase()) {\n      case 'INFO':\n        LOG_LEVEL = LOG_LEVEL_INFO;\n        break;\n      case 'DEBUG':\n        LOG_LEVEL = LOG_LEVEL_DEBUG;\n        break;\n      case 'WARN':\n        LOG_LEVEL = LOG_LEVEL_WARN;\n        break;\n      default:\n        LOG_LEVEL = DEF_LOG_LEVEL;\n        break;\n    }\n  },\n\n  info(...args) {\n    if (LOG_LEVEL <= LOG_LEVEL_INFO) {\n      console.info(...args);\n    }\n  },\n\n  debug(...args) {\n    if (LOG_LEVEL <= LOG_LEVEL_DEBUG) {\n      console.log(...args);\n    }\n  },\n\n  warn(...args) {\n    if (LOG_LEVEL <= LOG_LEVEL_WARN) {\n      console.warn(...args);\n    }\n  },\n\n  error(...args) {\n    if (LOG_LEVEL <= LOG_LEVEL_ERROR) {\n      console.error(...args);\n    }\n  },\n};\n\nexport default logger;\n","import each from '@ndhoule/each';\nimport logger from '../../utils/logUtil';\nimport { LOAD_ORIGIN } from '../../utils/ScriptLoader';\nimport { NAME } from './constants';\n\n// custom traits mapping context.traits --> moengage properties\nconst traitsMap = {\n  firstName: 'first_name',\n  lastName: 'last_name',\n  firstname: 'first_name',\n  lastname: 'last_name',\n  email: 'email',\n  phone: 'mobile',\n  name: 'user_name',\n  username: 'user_name',\n  userName: 'user_name',\n  gender: 'gender',\n  birthday: 'birthday',\n  id: null,\n};\nclass MoEngage {\n  constructor(config, analyticsinstance, destinationInfo) {\n    if (analyticsinstance.logLevel) {\n      logger.setLogLevel(analyticsinstance.logLevel);\n    }\n    this.apiId = config.apiId;\n    this.debug = config.debug;\n    this.region = config.region;\n    this.name = NAME;\n    this.analyticsinstance = analyticsinstance;\n    this.areTransformationsConnected = destinationInfo && destinationInfo.areTransformationsConnected;\n    this.destinationId = destinationInfo && destinationInfo.destinationId;\n  }\n\n  init() {\n    const self = this;\n    logger.debug('===in init MoEnagage===');\n    // loading the script for moengage web sdk\n    /* eslint-disable */\n    (function (i, s, o, g, r, a, m, n) {\n      i.moengage_object = r;\n      var t = {};\n      var q = function (f) {\n        return function () {\n          (i.moengage_q = i.moengage_q || []).push({ f, a: arguments });\n        };\n      };\n      var f = [\n        'track_event',\n        'add_user_attribute',\n        'add_first_name',\n        'add_last_name',\n        'add_email',\n        'add_mobile',\n        'add_user_name',\n        'add_gender',\n        'add_birthday',\n        'destroy_session',\n        'add_unique_user_id',\n        'moe_events',\n        'call_web_push',\n        'track',\n        'location_type_attribute',\n      ];\n      var h = { onsite: ['getData', 'registerCallback'] };\n      for (var k in f) {\n        t[f[k]] = q(f[k]);\n      }\n      for (var k in h)\n        for (var l in h[k]) {\n          null == t[k] && (t[k] = {}), (t[k][h[k][l]] = q(k + '.' + h[k][l]));\n        }\n      a = s.createElement(o);\n      m = s.getElementsByTagName(o)[0];\n      a.async = 1;\n      a.setAttribute('data-loader', LOAD_ORIGIN);\n      a.src = g;\n      m.parentNode.insertBefore(a, m);\n      i.moe =\n        i.moe ||\n        function () {\n          n = arguments[0];\n          return t;\n        };\n      a.onload = function () {\n        if (n) {\n          i[r] = moe(n);\n        }\n      };\n    })(\n      window,\n      document,\n      'script',\n      document.location.protocol === 'https:'\n        ? 'https://cdn.moengage.com/webpush/moe_webSdk.min.latest.js'\n        : 'http://cdn.moengage.com/webpush/moe_webSdk.min.latest.js',\n      'Moengage',\n    );\n    /* eslint-enable */\n\n    // setting the region if us then not needed.\n    if (this.region !== 'US') {\n      self.moeClient = window.moe({\n        app_id: this.apiId,\n        debug_logs: this.debug ? 1 : 0,\n        cluster: this.region === 'EU' ? 'eu' : 'in',\n      });\n    } else {\n      self.moeClient = window.moe({\n        app_id: this.apiId,\n        debug_logs: this.debug ? 1 : 0,\n      });\n    }\n    this.initialUserId = this.analyticsinstance.userId;\n  }\n\n  isLoaded = () => {\n    logger.debug('in MoEngage isLoaded');\n    return !!window.moeBannerText;\n  };\n\n  isReady = () => {\n    logger.debug('in MoEngage isReady');\n    return !!window.moeBannerText;\n  };\n\n  track(rudderElement) {\n    logger.debug('inside track');\n    // Check if the user id is same as previous session if not a new session will start\n    if (!rudderElement.message) {\n      logger.error('Payload not correct');\n      return;\n    }\n    const { event, properties, userId } = rudderElement.message;\n    if (userId) {\n      if (this.initialUserId !== userId) {\n        this.reset();\n      }\n    }\n    // track event : https://docs.moengage.com/docs/tracking-events\n    if (!event) {\n      logger.error('Event name not present');\n      return;\n    }\n    if (properties) {\n      this.moeClient.track_event(event, properties);\n    } else {\n      this.moeClient.track_event(event);\n    }\n  }\n\n  reset() {\n    logger.debug('inside reset');\n    // reset the user id\n    this.initialUserId = this.analyticsinstance.userId;\n    this.moeClient.destroy_session();\n  }\n\n  identify(rudderElement) {\n    const self = this;\n    const { userId } = rudderElement.message;\n    let traits = null;\n    if (rudderElement.message.context) {\n      traits = rudderElement.message.context.traits;\n    }\n    // check if user id is same or not\n    if (this.initialUserId !== userId) {\n      this.reset();\n    }\n    // if user is present map\n    if (userId) {\n      this.moeClient.add_unique_user_id(userId);\n    }\n\n    // track user attributes : https://docs.moengage.com/docs/tracking-web-user-attributes\n    if (traits) {\n      each(function add(value, key) {\n        // check if name is present\n        if (key === 'name') {\n          self.moeClient.add_user_name(value);\n        }\n        if (Object.prototype.hasOwnProperty.call(traitsMap, key)) {\n          const method = `add_${traitsMap[key]}`;\n          self.moeClient[method](value);\n        } else {\n          self.moeClient.add_user_attribute(key, value);\n        }\n      }, traits);\n    }\n  }\n}\n\nexport default MoEngage;\n","/* eslint-disable no-use-before-define */\n// import logger from \"../utils/logUtil\";\n\nimport { handleError } from \"./errorHandler\";\n\nconst defaultAsyncState = true;\n\nexport const LOAD_ORIGIN = 'RS_JS_SDK';\n/**\n * Script loader\n * @param {String} id                               Id of the script\n * @param {String} src                              URL of the script\n * @param {Object} options                          Object containing different configuration\n * @param {Boolean} options.async                   Determines script will be loaded asynchronously or not\n * @param {Boolean} options.isNonNativeSDK          Determines whether the script that will be loaded is one of RS's own\n * @param {Boolean} options.skipDatasetAttributes   Determines whether to add or skip dataset attribute\n */\nconst ScriptLoader = (id, src, options = {}) => {\n  try {\n    const exists = document.getElementById(id);\n    if (exists) {\n      // logger.debug(\"script already loaded\");\n      return;\n    }\n\n    const js = document.createElement('script');\n    js.src = src;\n    js.async = options.async === undefined ? defaultAsyncState : options.async;\n    js.type = 'text/javascript';\n    js.id = id;\n    // This checking is in place to skip the dataset attribute for some cases(while loading polyfill)\n    if (options.skipDatasetAttributes !== true) {\n      js.setAttribute('data-loader', LOAD_ORIGIN);\n      if (options.isNonNativeSDK !== undefined) {\n        js.setAttribute('data-isNonNativeSDK', options.isNonNativeSDK);\n      }\n    }\n    const headElmColl = document.getElementsByTagName('head');\n    if (headElmColl.length > 0) {\n      // logger.debug(\"==adding script==\", js);\n      headElmColl[0].insertBefore(js, headElmColl[0].firstChild);\n    } else {\n      const e = document.getElementsByTagName('script')[0];\n      // logger.debug(\"==parent script==\", e);\n      // logger.debug(\"==adding script==\", js);\n      e.parentNode.insertBefore(js, e);\n    }\n  } catch (e) {\n    handleError(e);\n  }\n};\n\nexport default ScriptLoader;\n"],"names":["_CNameMapping","hop","Object","prototype","hasOwnProperty","strCharAt","String","charAt","toStr","toString","str","index","call","has","context","prop","indexKeys","target","pred","results","i","len","length","push","keys","source","val","isArrayLike","key","objectKeys","objToString","isArray","Array","type","_typeof","isNumber","arrayEach","iterator","array","baseEach","object","ks","each_1","collection","this","LOG_LEVEL","logger","logLevel","toUpperCase","_console2","console","log","apply","arguments","_console4","error","NAME","_defineProperty","traitsMap","firstName","lastName","firstname","lastname","email","phone","name","username","userName","gender","birthday","id","MoEngage","config","analyticsinstance","destinationInfo","isLoaded","window","moeBannerText","isReady","apiId","debug","region","areTransformationsConnected","destinationId","s","o","g","r","a","m","n","moengage_object","t","q","f","moengage_q","onsite","k","h","l","createElement","getElementsByTagName","async","setAttribute","src","parentNode","insertBefore","moe","onload","document","location","protocol","moeClient","app_id","debug_logs","cluster","initialUserId","userId","rudderElement","message","_rudderElement$messag","event","properties","reset","track_event","value","destroy_session","self","traits","add_unique_user_id","each","add_user_name","method","concat","add_user_attribute"],"mappings":"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"}