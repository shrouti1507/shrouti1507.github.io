var TVSquared_RS=function(t){"use strict";function e(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,n(i.key),i)}}function r(t,e,r){return(e=n(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var i=4,a=function(t){switch(t.toUpperCase()){case"INFO":i=1;break;case"DEBUG":i=2;break;case"WARN":i=3;break;default:i=4}},o=function(){var t;i<=2&&(t=console).log.apply(t,arguments)},s=function(){var t;i<=4&&(t=console).error.apply(t,arguments)};function c(t){var e=window.rudderanalytics&&window.rudderanalytics.errorReporting;e&&e.notify(t)}function u(t,e,r){var n;try{n=function(t,e,r){var n;try{n="string"==typeof t?t:t instanceof Error||t.message?t.message:JSON.stringify(t)}catch(t){n=""}if(t instanceof Event){if(t.target&&"script"!==t.target.localName)return"";if(t.target.dataset&&("RS_JS_SDK"!==t.target.dataset.loader||"true"!==t.target.dataset.isNonNativeSDK))return"";if(n="error in script loading:: src::  ".concat(t.target.src," id:: ").concat(t.target.id),"ad-block"===t.target.id)return r.page("RudderJS-Initiated","ad-block page request",{path:"/ad-blocked",title:n},r.sendAdblockPageOptions),""}return"[handleError]::".concat(e||"",' "').concat(n,'"')}(t,e,r)}catch(e){s("[handleError] Exception:: ",e),s("[handleError] Original error:: ",JSON.stringify(t)),c(e)}if(n){s(n);var i=t;t instanceof Error||(i=new Error(n)),c(i)}}var d,l="RS_JS_SDK",p="TVSQUARED";r(d={},p,p),r(d,"TVSquared",p),r(d,"tvsquared",p),r(d,"tvSquared",p),r(d,"TvSquared",p),r(d,"Tvsquared",p),r(d,"TV Squared",p),r(d,"tv squared",p),r(d,"tv Squared",p);var v=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isLoaded=function(){return o("in TVSqaured isLoaded"),!(!window._tvq||window._tvq.push===Array.prototype.push)},this.isReady=function(){return o("in TVSqaured isReady"),!(!window._tvq||window._tvq.push===Array.prototype.push)},this.page=function(){window._tvq.push([function(){this.deleteCustomVariable(5,"page")}]),window._tvq.push(["trackPageView"])},this.formatRevenue=function(t){var e=t;return e=parseFloat(e.toString().replace(/^[^\d.]*/,""))},r.logLevel&&a(r.logLevel),this.brandId=e.brandId,this.clientId=e.clientId,this.eventWhiteList=e.eventWhiteList||[],this.customMetrics=e.customMetrics||[],this.name=p,this.areTransformationsConnected=n&&n.areTransformationsConnected,this.destinationId=n&&n.destinationId}var r,n,i;return r=t,n=[{key:"init",value:function(){o("===in init TVSquared==="),window._tvq=window._tvq||[];var t="https:"===document.location.protocol?"https://":"http://";t+="collector-".concat(this.clientId,".tvsquared.com/"),window._tvq.push(["setSiteId",this.brandId]),window._tvq.push(["setTrackerUrl","".concat(t,"tv2track.php")]),function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{if(document.getElementById(t))return;var n=document.createElement("script");n.src=e,n.async=void 0===r.async||r.async,n.type="text/javascript",n.id=t,!0!==r.skipDatasetAttributes&&(n.setAttribute("data-loader",l),void 0!==r.isNonNativeSDK&&n.setAttribute("data-isNonNativeSDK",r.isNonNativeSDK));var i=document.getElementsByTagName("head");if(i.length>0)i[0].insertBefore(n,i[0].firstChild);else{var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a)}}catch(a){u(a)}}("TVSquared-integration","".concat(t,"tv2track.js"))}},{key:"track",value:function(t){var e,r,n=t.message,i=n.event,a=n.userId,o=n.anonymousId,s=t.message.properties,c=s.revenue,u=s.productType,d=s.category,l=s.order_id,p=s.promotion_id,v=this.eventWhiteList.slice();for(v=v.filter((function(t){return""!==t.event})),e=0;e<v.length&&i.toUpperCase()!==v[e].event.toUpperCase();e+=1)if(e===v.length-1)return;var f={user:a||o||""},h={rev:c?this.formatRevenue(c):"",prod:d||u||"",id:l||"",promo:p||""},g=this.customMetrics.slice();if((g=g.filter((function(t){return""!==t.propertyName}))).length)for(r=0;r<g.length;r+=1){var y=g[r].propertyName,m=t.message.properties[y];m&&(h[y]=m)}window._tvq.push([function(){this.setCustomVariable(5,"session",JSON.stringify(f),"visit")}]),"RESPONSE"!==i.toUpperCase()?(window._tvq.push([function(){this.setCustomVariable(5,i,JSON.stringify(h),"page")}]),window._tvq.push(["trackPageView"])):window._tvq.push([function(){this.deleteCustomVariable(5,"page")}])}}],n&&e(r.prototype,n),i&&e(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}();return t.TVSquared=v,Object.defineProperty(t,"__esModule",{value:!0}),t}({});
//# sourceMappingURL=TVSquared.min.js.map
